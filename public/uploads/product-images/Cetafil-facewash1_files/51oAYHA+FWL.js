(function(z){var C=window.AmazonUIPageJS||window.P,F=C._namespace||C.attributeErrors,b=F?F("DPTwisterPlusDesktopConfiguratorAssets",""):C;b.guardFatal?b.guardFatal(z)(b,window):b.execute(function(){z(b,window)})})(function(z,C,F){z.when("A","desktop-configurator-view","desktop-configurator-widgets-factory","desktop-configurator-slot-manager","twister-dynamic-style","desktop-configurator-logger","desktop-configurator-dimension-handler","desktop-configurator-side-sheet-view","desktop-configurator-popover-factory",
"twister-js-init-dpx-data","twister-plus-desktop-configurator-mark-render").register("desktop-configurator-view-initialiser",function(b,h,r,p,f,k,q,v,m,g){var t=g?g.inlineTwisterData||{}:{};t.inlineTwisterEnabled&&(k=new k,new h(g,r.Row,p,f,k,q,v,m),!t.shouldDelayRegistrationWithTwisterCore&&b.trigger("desktop-configurator-view-initialized"))});"use strict";z.when("A").register("desktop-configurator-dimension-handler",function(b){function h(b){this.numberOfDimensionsExpandedOnLanding=b.numberOfDimensionsExpanded||
0;this.expandAllDimensions=-1===this.numberOfDimensionsExpandedOnLanding;this.dimensionKeyRowMap={};this.expandedDimensionList=[];this.maxNumberOfDimensionsExpanded=b.maxNumberOfDimensionsExpanded||1}h.prototype={registerDimension:function(b,h){this.dimensionKeyRowMap[b]=h;(this.expandAllDimensions||this.expandedDimensionList.length<this.numberOfDimensionsExpandedOnLanding)&&this.expandedDimensionList.push(b)},init:function(){-1===this.maxNumberOfDimensionsExpanded&&(this.maxNumberOfDimensionsExpanded=
Object.keys(this.dimensionKeyRowMap).length)},expandDimension:function(b){-1===this.expandedDimensionList.indexOf(b)&&this.expandedDimensionList.push(b);if(this.maxNumberOfDimensionsExpanded<this.expandedDimensionList.length)for(var h=0;h<this.expandedDimensionList.length&&(this.expandedDimensionList[h]!==b&&this.dimensionKeyRowMap[this.expandedDimensionList[h]].collapse(),this.maxNumberOfDimensionsExpanded!==this.expandedDimensionList.length);h++);},collapseDimension:function(b){b=this.expandedDimensionList.indexOf(b);
-1!==b&&this.expandedDimensionList.splice(b,1)}};return h});"use strict";z.when("A","desktop-configurator-constants","3p-promise","desktop-configurator-price-mismatch-utils").register("desktop-configurator-view",function(b,h,r,p){var f=b.$;return function(k,q,v,m,g,t,B,x){function a(){"function"===typeof C.markFeatureInteractive&&C.markFeatureInteractive("twister",{hasComponents:!0,components:[{name:"twister-desktopConfigurator"}]})}function c(){if(!D)return 0===k.unselectedDimCount;var a=e();return!!D.util.getAsinFromSelectionInfo(a)}
function d(e,a,c,d,b,n,u,g,w,f,q,y){return{text:e,image:a||"",popoverImage:c||"",name:d,id:q+"_"+d,selected:b,slotHtm:n,showSlot:u,isVisible:g,unavailable:w,defaultSlotUnavailable:U,isCirclularImageSwatch:l.inlineTwisterData&&"CIRCLE"===l.inlineTwisterData.swatchShape,asin:f,pageUrl:y}}function u(e){V[e]||null===H[e]||(e=l.rows[e],e.toggleSwatch&&e.toggleSwatch.removeMisplacedSwatch())}function w(e,a){var c=N.unselectedDimensionPrompt||"",d=k&&k.variationDisplayLabels?k.variationDisplayLabels[e]:
"",b=k&&k.variationValues?k.variationValues[e][a]:"";return{dimKey:e,titleSelectorPrefix:"inline-twister-dim-title-",titleValueSelector:"inline-twister-dim-title-value",mainText:d,subText:-1!==a?b:c.replace("###dimension",d||"")}}function e(){if(!D){var e=[];b.each(l.dimList,function(a){e.push({dimKey:a,val:k.selectedVariationValues?k.selectedVariationValues[a]:-1})});return e}return D.state()}function n(){return b.map(l.dimList,function(e,a){if(!l.isSingletonMap[e])return new r(function(c){y(l.rows[e],
e,a);c()})})}function y(e,a,n){var u=l.inlineTwisterData.slotsEnabledDimensions,g=!!((l.dimList.length===u.length?u[n]:u[0])&&c(a));n=k.variationValues[a];var w=e.getInitialVisibleSwatchList(),f=[];b.each(n,function(e,c){e=d(e,W[a+"::"+c],X[a+"::"+c],c,l.initSelectionState[a].val===c,w[c]?w[c].slotHtm:"",g,w[c]&&w[c].isVisible,w[c]&&w[c].unavailable,F,a,M[a]?M[a][e]:null);f.push(e)});l.swatches[a]=f}function A(){b.each(l.rows,function(e){l.isSingletonMap[e.dimKey]||(e.createDisplaySwatches(),l.textSwatchMap[e.dimKey]&&
e.toggleSwatch.alignTextSwatches())})}function I(){function n(e,a,c){var u,g,w,f=e.expanderContent.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)"),y=k.variationValues[a]||[],q=l.inlineTwisterData.inlineVariationsSize,m=-1,h=q,v=[],A=null;-1===q&&(m=parseInt(e.expanderContent.attr("data-swatchCountPerRow"))||f.length,h=m*O[a]);b.each(f,function(n,b){var l=parseInt(n.getAttribute("data-idxInToggleSwatchList")),f="true"===n.getAttribute("data-initiallySelected"),k="true"===n.getAttribute("data-initiallyUnavailable");
u=n.getAttribute("data-asin");g=l;w=y[l]||"";var t,I,G;t=W[a+"::"+g];I=X[a+"::"+g];G=w;k=d(G,t,I,g,f,"",c,!0,k,u,a,M[a]?M[a][G]:null);e.toggleSwatch&&(t=e.toggleSwatch.createSwatch(k,n),k.isVisible=t.isVisible);v.push(k);f&&b>=h&&(H[a]=l);-1!==q&&-1===m&&(n=n.getBoundingClientRect().top,null===A?A=n:n!==A&&(m=b))});-1!==q&&(-1===m&&(m=f.length),O[a]=Math.ceil(f.length/m));l.inlineVariationsSize[a]=f.length;e.toggleSwatch&&e.toggleSwatch.setNumberOfSwatchesPerRow(m);return v}function g(e,a,d){var n=
!(!e||!c(a)),u=l.rows[a].getInitialVisibleSwatchList();n&&b.each(u,function(c){if(!c.unavailable){var n=x.updateIfCurrentlyActive.bind(x,c.id),n=l.slotManager.get(c.asin,a,l.noOfLoadingIndicator,!1,Z,n,d);c.updateSlotNode({showSlot:e,slotHtm:n},!1,a)}})}function y(a,c,d){a={dimIndex:l.dimIndexMap[a],dimValueIndex:c};c=h.DP_STATE_VIEW_SUBTYPE;var n=l.dimensionsMap,b;b=e();for(var u=h.CHAR_UNDERSCORE,g=[],w=0;w<l.dimensionsMap.length;w++){var f=b[w].val;-1===f&&(f=h.CHAR_ASTERISK);g.push(String(f))}b=
u?g.join(u):g;return{divMetadata:a,eventType:d,subType:c,dimensionsMap:n,currDimCombId:b}}var v=e(),m=0,A={},t=l.inlineTwisterData.slotsEnabledDimensions,I=l.inlineTwisterData.popoverSlotsEnabledDimensions;f.each(v,function(e,a){A[a.dimKey]=a;l.dimIndexMap[a.dimKey]=e;l.dimensionsMap[e]=a.dimKey});l.initSelectionState=A;f.each(l.dimList,function(a,c){var d=A[c].val;a=G(c);var d=w(c,d),n=!(!P&&(l.dimList.length===t.length?t[m]:t[0])),b=-1!==Q.indexOf(c);l.textSwatchMap[c]=a;a=new q("inline-twister-row-",
d,{showSlot:!1,dimKey:c,inlineTwisterData:l.inlineTwisterData},{handleDimensionExpansion:function(a,d,u){c=a.dimKey;if(u){l.dimensionHandler.expandDimension(c);a=F;u={};R[c]?(u=S(l.swatches[c],d,c,e(),!1,!b,n),l.indexTranslationMap[c]=u,a={swatches:l.swatches[c]}):(g(d,c,n),R[c]=!0);var w=l.rows[c];w.setState(a,u,J,null,!1);K(d,w,c);l.logger.logDimensionExpanded(c);b||(H[c]=null)}else l.dimensionHandler.collapseDimension(c),l.logger.logDimensionCollapsed(c)}},l.logger);l.rows[c]=a;p.createLandingPromises(l.logger,
c);m+=1});0===l.inlineTwisterData.numberOfDimensionsExpanded&&(a(),aa=!0);m=0;f.each(l.dimList,function(a,d){function g(a,e,c){if(e){var n=parseInt(e.buttonName,10),b=a[n]&&a[n].id?a[n].id:"";d=e.buttonGroupName;a[n]&&a[n].selected&&l.logger.logSelectedSwatchClick();b&&x.exists(b)&&x.hide(b);J=d;a={dimKey:d,val:n};C.newTwisterInteractionStartTime=new Date;l.twister.metaData(y(d,n,h.viewEvents.CLICK));l.twister.dimensionChanged(a);l.logger.logDimensionValueClick();c&&l.logger.logDimValueClickAfterAutoUpdate()}}
function w(a,d){var n=d.data,b=d.type;d=d.$currentTarget;var u=n.id,g=!!c(a),g=L&&g&&B,g=n.showImageInPopOver||g,f=!B,q=[];if(n){if(b===h.viewEvents.MOUSE_ENTER){var k=parseInt(n.name,10);q.push({dimKey:a,val:k});g&&x.show(u,d,n,f)}else g&&x.hide(u),q=e();D&&(l.twister.metaData(y(a,k,b)),l.twister.dimensionPeek(q));J=a}}function q(a,e){var c=parseInt(a.buttonName,10),d=l.swatches[e];(d?d[c]:F)?(E.setUserInteracting(!0),b.delay(function(){g(d,a)},350),l.logger.logSecViewSwatchClick()):z.log("Selected swatch not found on side sheet toggle button click. Value clicked: "+
c+" ; Swatch length: "+l.swatches[e].length,ba.ERROR,ba.ATTRIBUTION)}function v(a,e){l.isSideSheetOpen=e;l.isWindowResizedAfterSideSheetOpen&&!e&&f.each(l.dimList,function(a,e){l.textSwatchMap[e]&&(G(e),(a=l.rows[e])&&a.toggleSwatch&&(a.toggleSwatch.alignTextSwatches(),a.toggleSwatch.alignTextSwatchNodesInLastRow()))});l.isWindowResizedAfterSideSheetOpen=!1}function A(a,c,d){var n=N.desktopConfiguratorAllOptionsString||"",g=l.swatches[a].length,w={dimensionDisplayText:d.mainText,displayValueText:d.subText,
dimKey:a,getSwatchInfo:E.getSwatch.bind(E),destroyPopover:x.destroy,optionsText:n,totalValueCount:g,isTextSwatch:r};l.sideSheet.open(w);var f={swatches:l.swatches[a]};b.delay(function(){var d=S(l.swatches[a],c,a,e(),!0,!1,Y);T&&u(a);E.setState(f,d,J,null,!0,!0);l.sideSheet.update(w);V[a]=!0;b.delay(function(){r&&K(c,E,a,!0);r&&E.toggleSwatch&&g<h.TEXT_ALIGNMENT_LIMIT&&E.toggleSwatch.alignTextSwatches(!1,!0)})},1E3);l.isSideSheetOpen=!0;l.isWindowResizedAfterSideSheetOpen=!1;l.logger.logSeeAllLinkClick("Dimension"+
(l.dimIndexMap[a]+1))}function G(a){D&&(l.isWindowResizedAfterSideSheetOpen=!0,l.isSideSheetOpen||K(l.showSlotMap[a],l.rows[a],a,!1))}var r=l.textSwatchMap[d];a=[];var p=!P&&(l.dimList.length===t.length?t[m]:t[0]),B=l.dimList.length===I.length?I[m]:I[0],Y=!p,L=p||B,T=-1!==Q.indexOf(d),E=l.rows[d];l.showSlotMap[d]=L;O[d]=l.inlineTwisterData.numOfRowsPerDimension;p=-1!==k.singletonDimensionKeys.indexOf(d);l.isSingletonMap[d]=p;m+=1;!p&&E&&(p=!(!L||!c(d)),H[d]=null,a={name:d,swatches:a,isTextSwatch:r,
onChange:g,onHover:w,hideSlotsFromMainView:Y,totalSwatchCount:(k.variationValues[d]||[]).length,preserveNaturalSwatchOrder:T},l.sideSheet.registerToggleButtonGroup(d,q,v),E.initializeComponents(a,L,{showSideSheet:A,handleWindowResize:G}),l.dimensionHandler.registerDimension(d,E),a=n(E,d,p),l.swatches[d]=a)});aa||a()}function G(a){var e=!0;(l.inlineTwisterData.disableImageSwatch===F?0:l.inlineTwisterData.disableImageSwatch)||(e=!l.inlineTwisterData.imageDimensionKeysMap[a]);return e}function S(a,e,
d,n,g,w,q,k){var y=!(!e||!c(d));e=D.util.getDimAvailability(d,n);var m=-1!==Q.indexOf(d),v={},h=0,A=x.updateIfCurrentlyActive,t=-1;f.each(n,function(a,e){e.dimKey===d&&(t=e.val)});-1!==t&&(w&&(v[t]=h),h++);var p=l.rows[d];b.each(e.available,function(e){a[e.index]=a[e.index]||{};var c=a[e.index];c.unavailable=!1;c.selected&&(t=e.index,c.isVisible||(null!==H[d]&&a[H[d]]&&(a[H[d]].isVisible=!1,m&&u(d)),H[d]=e.index),c.isVisible=!0);w&&(c.isVisible=h<l.inlineVariationsSize[d]||c.selected);var n=c.isVisible||
g,f=g?c.id+"_sec":c.id;y&&n?c.slotHtm=l.slotManager.get(e.asin,d,l.noOfLoadingIndicator,g,Z,A.bind(x,f),q,k):(c.slotHtm=c.slotHtm||"",A(f,c.slotHtm));g&&p&&p.toggleSwatch&&(n=p.toggleSwatch.getSwatch(e.index),b.objectIsEmpty(n)&&(v[e.index]=h));w&&t!==e.index&&(v[e.index]=h);c.showSlot=y;c.selected||h++});b.each(e.unavailable,function(e){a[e.index]=a[e.index]||{};var c=a[e.index];c.unavailable=!0;w&&(c.isVisible=h<l.inlineVariationsSize[d]);c.slotHtm=y?U:"";w&&(v[e.index]=h);c.showSlot=y;h++});R[d]=
!0;m&&(v={});return v}function K(a,e,c,d,n){var b=l.textSwatchMap[c];!a||!b&&!n||d&&!l.isSideSheetOpen||(l.slotManager.resetMinSlotHeight(c),a=e.toggleSwatch.getSlotNodes(d),ca(a,c,d),l.slotManager.updateSlotHeight(c,d))}function ca(a,e,c){l.slotManager.resetSlotHeight(e,c);b.each(a,function(a,c){b.each(a,function(a){l.slotManager.setState(a,e,c)})})}function Z(a,e){e&&!l.isSideSheetOpen||K(!0,l.rows[a],a,e)}var l=this,D=F;this.isWindowResizedAfterSideSheetOpen=!1;this.data=k;this.noOfLoadingIndicator=
1;this.dimList=k.reorderedDimensionListKeys||[];this.dimensionsMap=[];this.logger=g;this.inlineTwisterData=k?k.inlineTwisterData||{}:{};this.swatches={};this.sideSheet=new B;var H={},N=this.inlineTwisterData&&this.inlineTwisterData.stringTranslationMap?this.inlineTwisterData.stringTranslationMap:{},U='\x3cspan class\x3d"a-size-small default-slot-unavailable"\x3e'+(N.defaultSlotUnavailableString||"")+"\x3c/span\x3e",W=k.imageHashMap||{},X=k.desktopConfiguratorPopoverImageMap||{},M=k.dimensionPageLoadUrls||
{},O={},P=!!k.isAssemblyVariationsEnabled;this.rows={};this.dimensionHandler=new t(l.inlineTwisterData);this.isSingletonMap={};this.indexTranslationMap={};this.textSwatchMap={};var J,ba=h.loggingConstants;this.initSelectionState={};x.setVisibleSlotConfig(this.inlineTwisterData&&this.inlineTwisterData.desktopConfiguratorSlotsInPopover?this.inlineTwisterData.desktopConfiguratorSlotsInPopover:[]);this.inlineVariationsSize={};this.dimIndexMap={};this.isSideSheetOpen=!1;this.showSlotMap={};var Q=l.inlineTwisterData.dimsWithSwatchReorderingDisabled||
[],V={},R={},aa=!1;(function(){var a=l.logger.createFunctionTimerInstance("desktopConfiguratorInitTime");a.start();I();a.stop()})();b.on("register-desktop-configurator-with-twisterCore",function(a,c){D=a;l.logger.registerTwisterCore(D);l.sideSheet.init(l.logger);a=e();var d=l.inlineTwisterData.slotsEnabledDimensions,u=l.inlineTwisterData.popoverSlotsEnabledDimensions,q={};f.each(a,function(a,e){q[e.dimKey]=e});D.slotsDimSum.addDefaultQueryParameter("showFancyPrice",l.inlineTwisterData.showFancyPrice);
D.slotsDimSum.addDefaultQueryParameter("twisterFlavor",h.DESKTOP_CONFIGURATOR_FLAVOR);l.slotManager=new v(D,m,l.logger,l.inlineTwisterData);l.dimensionHandler.init();var y=0;b.each(l.rows,function(a){function e(d){var u,q={},y;u=d.selected().selectionInfo();f.each(u,function(a,e){q[e.dimKey]=e});y=q[c].val;var m=l.swatches[c];m[y]=m[y]||{};m[n]=m[n]||{};m[n].selected=!1;m[y].selected=!0;var h=w(c,n);n===y||k||a.setThumbnailImage(m[y].image);n=y;S(m,A,c,u,!1,!1,v,A);u=w(c,y);y={swatches:m};var t=b.filter(m,
function(a){return a.isVisible});m.length===t.length&&(a.hideSideSheetLink(),l.inlineVariationsSize[c]=m.length);a.setExpanderHeaderAriaLabel(h,u);a.setState(y,{},J,u,!1);p.createTwisterUpdatePromises(A,g,d,D,c);K(A,a,c,F,!0)}if(!l.isSingletonMap[a.dimKey]){a.postInitialize();var c=a.dimKey,n=q[c].val,k=G(c),h=l.dimList.length===u.length?u[y]:u[0],m=!P&&(l.dimList.length===d.length?d[y]:d[0]),v=!m,A=m||h;l.twister=D.registerActive({viewAttribution:"DetailPage",viewName:"DesktopConfiguratorRowView_"+
c},{updateView:function(d,n){var u={};"VARIATION_CHANGE"===d?b.delay(function(){e(n)}):"VARIATION_PEEK"===d&&(d=n.peek().selectionInfo(),f.each(d,function(a,e){u[e.dimKey]=e}),d=u[c].val,d=w(c,d),J===c&&a.title.setState(d),l.sideSheet.activeDimKey===c&&l.sideSheet.updateDimVal(d))}})}y++});r.all(n()).then(function(){A()});b.trigger("desktop-configurator-twisterCore-initialized",l);c.then(function(){b.each(l.rows,function(a){a.activatePageRefresh()})})})}});"use strict";z.when("A").register("desktop-configurator-constants",
function(b){return{AJAX_CALL_TIMEOUT:2E4,DIMENSION_VALUE:"DimensionValue###",DISPLAY_VALUE:"DisplayValue###",SWATCH_DATA:"SwatchData###",DESKTOP_CONFIGURATOR_FLAVOR:"twisterPlusDesktopConfigurator",MAX_DIMENSION_FLAVOUR_CAP:3,POPOVER_DELAY:500,MAX_INLINE_ROWS:7,SIDE_SHEET_ANIMATION_SPEED:300,SIDE_SHEET_PADDING:32,TEXT_SWATCH_MARGIN_RIGHT:6,CONFIGURED_SLOTS:["price","ms3","twisterPrimeWardrobe","twisterAvailability","deliveryPromise"],DP_STATE_VIEW_SUBTYPE:"DETAILPAGE_STATE_VIEW_METADATA",CHAR_UNDERSCORE:"_",
CHAR_ASTERISK:"*",DEFAULT_SCROLLER_WIDTH:20,BORDER_WIDTH:2,TEXT_ALIGNMENT_LIMIT:400,DEFAULT_TEXT_SWATCH_SPACING:16,DEFAULT_IMAGE_SWATCH_SPACING:8,REDUCED_IMAGE_SWATCH_SPACING:4,viewEvents:{MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",CLICK:"click"},sideSheetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",SEC_VIEW_DIMENSION_VALUE_LIST:" #tp-inline-twister-dim-values-container",DIMENSION_VALUES_LIST:" .dimension-values-list",DIMENSION_VALUES_LIST_ODD_CHILD:" .dimension-values-list \x3e :nth-child(odd)",
DIMENSION_VALUES_LIST_EVEN_CHILD:" .dimension-values-list \x3e :nth-child(even)",LIST_ITEM_CIRCULAR_IMAGE:".dimension-value-list-item-circular-image",CIRCULAR_IMAGE_SWATCH_BUTTON:".circle-image-swatch-button",LIST_ITEM_SQUARE_IMAGE:".dimension-value-list-item-square-image",SQUARE_IMAGE_SWATCH_BUTTON:".image-swatch-button",TEXT_LIST_ITEM:".swatch-list-item-text",TEXT_SWATCH_BUTTON:".text-swatch-button",TEXT_SWATCH_BUTTON_WITH_SLOTS:".text-swatch-button-with-slots",IMAGE_SELECTOR:".swatch-image",SEC_VIEW_TOGGLE_BUTTON_PREFIX:"sec_",
DELAY:200},widgetSelectors:{EXPANDER_CONTENT_PREFIX:"#inline-twister-expander-content-",EXPANDER_HEADER_PREFIX:"#inline-twister-expander-header-",DIMENSION_EXPANDER_ICON_PREFIX:"#dimension-expander-icon-",DIMENSION_EXPANDER_ICON_WRAPPER:".dimension-expander-icon-wrapper",EXPANDED_DIMENSION_TEXT_PREFIX:"#inline-twister-expanded-dimension-text-",COLLAPSED_DIMENSION_TEXT_PREFIX:"#inline-twister-collapsed-dimension-text-",AUTO_NOTIFICATION_EXPANDED:"#inline-twister-auto-notification-expanded",AUTO_NOTIFICATION_COLLAPSED:"#inline-twister-auto-notification-collapsed",
IMAGE_THUMBNAIL:".dimension-collapsed-image-thumbnail",SWATCH_NODE_SELECTOR:".inline-twister-swatch",SLOT_NODE_SELECTOR:".dimension-slot-info",TOGGLE_BUTTON_SELECTOR:".a-button-toggle",IMAGE_SELECTOR:".swatch-image",DIMENSION_VALUES_LIST:".dimension-values-list"},classes:{A_COLOR_ATTAINABLE:"a-color-attainable",AOK_HIDDEN:"aok-hidden",DIMENSION_EXPANDER_CONTENT_EXPAND:"dimension-expander-content-expand",ROTATE:"rotate",A_BUTTON_UNAVAILABLE:"a-button-unavailable",A_BUTTON_SELECTED:"a-button-selected",
A_BUTTON_FOCUS:"a-button-focus",ROW_IDENTIFIER_PREFIX:"desktop-configurator-dim-row-"},cssConstants:{BG_COLOR:"background-color",GREEN_BG_COLOR:"#D9EED9",WHITE_BG_COLOR:"white"},loggingConstants:{ATTRIBUTION:"TwisterPlusDesktopConfigurator",ERROR:"ERROR"}}});"use strict";z.when("A").register("desktop-configurator-logger",function(b){function h(){if(!(this instanceof h))return new h;f||(f=this);return f}function r(b){if("undefined"!==typeof C.csa){var f=C.csa("Events",{producerId:"dp-rpcx"}),m=k.count(b)||
0;f("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:b,valueToLog:m},{ent:"all"})}}var p=b.$,f,k=C.ue;h.prototype={registerTwisterCore:function(b){this.twisterCore=b},logCSMDataOnLanding:function(){var b=0,f=0,m=0,g=this.twisterCore.util,h=g.tvm.dimensionInfo,B=this.twisterCore.state().length,x=Object.keys(g.tvm.dimCombinations).length;p.each(h,function(a,c){a=c.dimKey;g.isRequiredDim(a)&&m++;g.isSingletonDim(a)?f++:b++});k&&k.count&&(k.count("dpMobileTwisterDropdownPresent",b),r("dpMobileTwisterDropdownPresent"),
k.count("dpMbileTwisterSingletonDim",f),r("dpMbileTwisterSingletonDim"),k.count("dpMobileTwisterRequiredDim",m),r("dpMobileTwisterRequiredDim"),k.count("dpMobileTwisterDimSize",B),r("dpMobileTwisterDimSize"),k.count("dpMobileTwisterFamilySize",x),r("dpMobileTwisterFamilySize"),k.count("twisterPlus.inlineTwisterGV",1),r("twisterPlus.inlineTwisterGV"))},logCSMTagsOnLanding:function(f){function k(a,c,d){var u=[];if(c===d)u.push(""),a=a[c],b.$.isArray(a)?b.each(a,function(a,c){u.push(a)}):u.push(a);else{var g=
Math.floor((c+d)/2);c=k.call(this,a,c,g);var f=k.call(this,a,g+1,d);b.each(c,function(a,c){b.each(f,function(c,e){u.push(""===a?c:""===c?a:a+":"+c)})})}return u}function m(a){a&&h.push(a)}var g=this,h=[],p=!0,r=!0,a=[0,3,8,25,50,100,1E3,5E3],c=Object.keys(this.twisterCore.util.tvm.dimCombinations).length,d,u;f.dimensionList&&(d="variation_dimension:"+f.dimensionList.length,b.each(f.dimensionList,function(a,c){g.addCSMTag(a)}));for(var w=1;w<a.length;w++)if(c<=a[w]){u="family_size_bucket:"+a[w-1]+
"-"+a[w];break}else w===a.length-1&&(u="family_size_bucket:gt"+a[w]);f.dimensionInfo&&b.each(f.dimensionInfo,function(a,c){a.isSingleton||(p=!1)});a=p?"SingletonFamily":"DesktopConfigurator";f.initDimCombination&&b.each(f.initDimCombination,function(a,c){-1===a.val&&(r=!1)});m(d);m(u);m(a);r&&m("defaultSelection");f=k.call(this,h,0,h.length-1);(function(a){var c=this;b.each(a,function(a,e){a&&c.addCSMTag(a)})}).call(this,f)},createFunctionTimerInstance:function(b){var f=this;return{eventType:b,start:function(){this.startTime=
Date.now()},stop:function(){this.startTime&&f.logCounter(this.eventType,Date.now()-this.startTime)}}},addCSMTag:function(b){C.ue&&C.ue.tag&&C.ue.tag(b)},logCounter:function(b,f){k&&k.count&&(f===F?k.count(b,(k.count(b)||0)+1):k.count(b,f),r(b))},logBottomSheetPageUpdate:function(b){this.logCounter("twisterPlus.inlineTwisterPageUpdate")},logSelectedSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.selectedSwatchClick")},logDimensionValueClick:function(){this.logCounter("dpmobiletwisterclickOndimval")},
logSecViewTotalCount:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewCount."+b)},logSecViewGV:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewGV."+b)},logSecViewClosed:function(b){this.logCounter("twisterPlus.inlineTwister.secondaryViewClosed."+b)},logDimensionCollapsed:function(b){this.logCounter("twisterPlus.inlineTwister.dimCollapse."+b)},logDimensionExpanded:function(b){this.logCounter("twisterPlus.inlineTwister.dimExpand."+b)},logSecViewSwatchClick:function(){this.logCounter("twisterPlus.inlineTwister.secViewSwatchClick")},
logDimExpansionAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimExpansionAfterAutoUpdate")},logDimValueClickAfterAutoUpdate:function(){this.logCounter("twisterPlus.inlineTwister.dimValueClickAfterAutoUpdate")},logAvailabilitySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.availabilitySlotRender")},logPPUSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.ppuSlotRender")},logPrimeSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.primeSlotRender")},
logPriceSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.priceSlotRender")},logDeliverySlotRender:function(){this.logCounter("twisterPlus.inlineTwister.deliverySlotRender")},logReviewsSlotRender:function(){this.logCounter("twisterPlus.inlineTwister.reviewsSlotRender")},logSeeAllLinkClick:function(b){this.logCounter("twisterPlus.inlineTwister.seeAllLinkClick."+b)}};return h});"use strict";z.when("A").register("twister-dynamic-style",function(b){function h(b,k){this.name=b;this.styleNode;
this.rules=k||[];this.pendingRefresh}var r=b.$,p={};h.prototype={refresh:function(){var b=r("\x3cdiv /\x3e",{html:"\x26shy;\x3cstyle\x3e"+this.rules.join(" ")+"\x3c/style\x3e"});this.styleNode?(this.styleNode.replaceWith(b),delete this.styleNode,this.styleNode=b):(this.styleNode=b,this.styleNode.appendTo("body"))}};return{addCSSRules:function(b,k){p[b]?p[b].rules=k||[]:p[b]=new h(b,k);p[b].refresh()}}});"use strict";z.when("A","desktop-configurator-constants","desktop-configurator-twister-register",
"desktop-configurator-price-mismatch-utils").register("desktop-configurator-slot-manager",function(b,h,r,p){function f(a,c,d,b){this.twisterCore=a;this.batch={};this.currentBatch;this.maxSlotHeight={};this.minSlotHeight={};this.dynamicStyle=c;this.slotIdentifierMap={};this.logger=d;this.auiPriceSize=b&&b.auiPriceSize?b.auiPriceSize:"m";this.currentlyUnavailableMessage=b&&b.stringTranslationMap?b.stringTranslationMap.currentlyUnavailableMessage:"";this.desktopConfiguratorSlotsInMainView=b&&b.desktopConfiguratorSlotsInMainView?
b.desktopConfiguratorSlotsInMainView:[]}function k(a,c,d,u,g){var e=this.batch,n=this;e[a]=e[a]||[];e[a].push(d);clearTimeout(this.currentBatch);this.currentBatch=setTimeout(function(){var a=b.map(n.batch,function(a,c){return c});n.twisterCore.slotsDimSum.get(a,function(a){var e=n.batch[a.ASIN];e&&(B.each(e,function(c,e){e(a)}),delete n.batch[a.ASIN]);t(n.batch)&&(e=Object.keys(n.maxSlotHeight),b.each(e,function(a){u(a,g&&a===c)}))})},0)}function q(a,c,d,b){d[c]=d[c]||{};d[c].uniqueCount=d[c].uniqueCount||
0;var g="inline-twister-dimsum-loading-"+c+"-"+d[c].uniqueCount;d[c].uniqueCount+=1;return{loadingHtm:'\x3cdiv class\x3d"'+g+(a?" loading-indicator-1":"")+(b?" aok-hidden":"")+'"\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e',promise:function(a,c){var d=B("."+g+":not(.loading-indicator-in-popover)").parent();d.length&&(d.html(a),c(d))}}}function v(a){return a.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}function m(a,c,d,b){return v(x.default.call(this,
a.content.twisterSlotDiv,c,d,b))}function g(a,c){if(!a||0===a.length)return c;if(0<a.find(".loading-indicator-1").length)return a[0].scrollHeight;if(0===a.find(".defaultSlotUnavailable").length)return c;a=a[0].scrollHeight;c<a&&(c=a);return c}function t(a){for(var c in a)if(a.hasOwnProperty(c))return!1;return!0}var B=b.$,x={default:function(a,c,d,b){a=B("\x3cdiv\x3e"+a+"\x3c/div\x3e");var g=a.find(".price_slot_ppu"),e=a.find("#ms3slot"),n=a.find("#twisterAvailability"),f=a.find("#deliveryPromisePrefix"),
m=a.find(".variationReviewsSection"),k=d?[]:this.desktopConfiguratorSlotsInMainView,h=a.find(".twister_swatch_price");n.length&&((h.length||d)&&-1===k.indexOf("twisterAvailability")&&n.parent().addClass("aok-hidden"),n.parent().append("\x3cdiv class\x3d'js-dummy-twister-availability'\x3e\x3c/div\x3e"),n.parent().find(".a-size-medium").removeClass("a-size-medium").addClass("a-size-small"),n.parent().find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-small"),n.parent().find(".a-size-large").removeClass("a-size-large").addClass("a-size-small"),
c&&this.logger.logAvailabilitySlotRender());0<h.length?(-1===k.indexOf("price")&&h.addClass("aok-hidden"),h.addClass("inline-twister-swatch-price"),d=a.find(".a-price"),0<d.length?d[0].dataset&&(d[0].dataset.aSize=this.auiPriceSize):(h.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),h.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),h.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base")),
d="a-size-small",h.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(d),g.length&&(d="twister-plus-inline-twister-ppu a-size-micro",g.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(d),c&&this.logger.logPPUSlotRender()),c&&this.logger.logPriceSlotRender()):(h=a.find("#sndbox-mobile-twister-price"),0<h.length&&c&&this.logger.logPriceSlotRender());e.length&&(e.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small"),
-1===k.indexOf("ms3")&&e.addClass("aok-hidden"),c&&this.logger.logPrimeSlotRender());0<f.length&&(f.removeClass("a-size-small a-color-secondary").addClass("a-color-base"),-1===k.indexOf("deliveryPromise")&&f.parent().addClass("aok-hidden"),f.find("br").remove(),g=f.find("b"),0===g.length&&(g=f.find("span")),g.length&&(e=" "+v(g.text()),g.addClass("aok-hidden"),f.append('\x3cspan style\x3d"font-weight: bold;"\x3e'+e+"\x3c/span\x3e")),c&&this.logger.logDeliverySlotRender());0<m.length&&(m.removeClass("a-spacing-micro a-spacing-top-micro").addClass("a-spacing-none a-spacing-top-none"),
-1===k.indexOf("variationReviews")&&m.addClass("aok-hidden"),c&&this.logger.logReviewsSlotRender());r.executeModifiers(a);return p.updateSlotHtm(a.html(),b)}};f.prototype={get:function(a,c,d,b,g,e,n){var f=this,h=this.twisterCore.slotsDimSum.get([a]);if(h[a])return m.call(f,h[a].Value,!1,n);var v=q(d,c,f.slotIdentifierMap,n);k.call(this,a,c,function(a){v.promise(m.call(f,a.Value,!0,n),e)},g,b);return v.loadingHtm},setState:function(a,c,d){p.handleDimensionSlotPromise(a);this.minSlotHeight[c]||(this.minSlotHeight[c]=
[]);this.maxSlotHeight[c]||(this.maxSlotHeight[c]=[]);this.minSlotHeight[c][d]=this.minSlotHeight[c][d]||0;this.minSlotHeight[c][d]=g(a,this.minSlotHeight[c][d]);this.maxSlotHeight[c][d]=this.maxSlotHeight[c][d]||0;var b=this.maxSlotHeight[c];var f=this.maxSlotHeight[c][d];!a||0===a.length||0<a.find(".loading-indicator-1").length||(a=a[0].scrollHeight,f<a&&(f=a));b[d]=f;this.maxSlotHeight[c][d]=this.maxSlotHeight[c][d]>this.minSlotHeight[c][d]?this.maxSlotHeight[c][d]:this.minSlotHeight[c][d]},updateSlotHeight:function(a,
c){var d=[],g;b.each(this.maxSlotHeight[a],function(b,e){c?(d.push("#desktop-configurator-side-sheet #"+a+"dim_list .desktop-configurator-dim-row-"+e+" .dimension-slot-info {height: "+b+"px;}"),g="twister-plus-desktop-configurator-side-sheet-slot-height-"):(d.push("#inline-twister-expander-content-"+a+" .desktop-configurator-dim-row-"+e+" .dimension-slot-info {height: "+b+"px;}"),g="twister-plus-desktop-configurator-slot-height-")});this.dynamicStyle.addCSSRules(g+a,d)},resetMinSlotHeight:function(a){this.minSlotHeight[a]||
(this.minSlotHeight[a]=[]);this.minSlotHeight[a]=b.map(this.minSlotHeight[a],function(){return 0})},resetSlotHeight:function(a,c){this.maxSlotHeight[a]||(this.maxSlotHeight[a]=[]);this.dynamicStyle.addCSSRules((c?"twister-plus-desktop-configurator-side-sheet-slot-height-":"twister-plus-desktop-configurator-slot-height-")+a,[]);this.maxSlotHeight[a]=b.map(this.maxSlotHeight[a],function(){return 0})}};return f});"use strict";z.when("A","desktop-configurator-constants","detail-page-side-sheet").register("desktop-configurator-side-sheet-view",
function(b,h,r){function p(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null;this.updateSideSheetStatus={}}function f(){this.sideSheetData=this.activeDimKey=null;this.swatchList=[];this.mainViewDimContainer=this.keyDownEventHandler=this.dimValContainer=null}function k(a,c){b.each(a,function(a){var g="desktop-configurator-swatch-hover:"+c+"_sec";try{b.declarative.remove(a,g),b.declarative.create(a,g,{})}catch(f){z.log("Hover event subscribe failed with error: "+
this.name,x.ERROR,x.ATTRIBUTION)}})}function q(a){a=Array.prototype.slice.call(a);var c=t(a[0]).find("input");a=t(a[a.length-1]).find("input");this.keyDownEventHandler=m.bind(this,c,a);document&&document.addEventListener("keydown",this.keyDownEventHandler);b.delay(function(){c&&c.focus()})}function v(){if(this.mainViewDimContainer){var a=this.mainViewDimContainer.parent().find(".tp-side-sheet-link-container a")[0];document&&document.removeEventListener("keydown",this.keyDownEventHandler);a&&a.focus()}}
function m(a,c,d){d.code&&"tab"===d.code.toLowerCase()&&(d.shiftKey?document&&document.activeElement===a[0]&&(d.preventDefault(),c.focus()):document&&document.activeElement===c[0]&&(d.preventDefault(),a.focus()))}function g(a){var c=t("#desktop-configurator-side-sheet-content-header").clone();c.removeClass("aok-hidden");c.find(".dim-name").text(a.dimensionDisplayText+":");c.find(".dim-value").text(a.displayValueText);var d=a.optionsText;d&&c.find(".dim-options").text(d.replace("###options",a.totalValueCount));
return c}var t=b.$,B=h.sideSheetSelectors,x=h.loggingConstants;p.prototype={init:function(a){var c=this,d=t("#twister-plus-inline-twister-container");0!==d.length&&(d=d[0].getBoundingClientRect().width,this.scrollbarWidth=this.getScrollbarWidth(),this.sideSheet=new r({id:"desktop-configurator-side-sheet",shouldRenderHTMLString:!0,animationDuration:h.SIDE_SHEET_ANIMATION_SPEED,width:d+h.SIDE_SHEET_PADDING+c.scrollbarWidth,onAfterHide:function(){a.logSecViewClosed(c.activeDimKey);b.each(c.swatchList,
function(a){var d=parseInt(a.getAttribute("data-idxInToggleSwatchList"),10),d=c.sideSheetData.getSwatchInfo(d);b.declarative.remove(a,"desktop-configurator-swatch-hover:"+c.activeDimKey+"_sec");c.sideSheetData.destroyPopover(d.id+"_sec")});v.call(c);c.updateSideSheetStatus[c.activeDimKey]&&c.updateSideSheetStatus[c.activeDimKey](c.activeDimKey,!1);f.call(c)}}))},open:function(a){this.activeDimKey=a.dimKey;this.sideSheetData=a;var c=t("#inline-twister-row-"+a.dimKey+" #tp-inline-twister-dim-values-container").find(".desktop-configurator-dim-row-0"),
d=t("#side-sheet-loader-container").clone().removeClass("aok-hidden"),f=d.find(".loader-container"),k=d.find("#side-sheet-loader").clone().removeClass("aok-hidden"),e,n,m=h.DEFAULT_TEXT_SWATCH_SPACING;a.isTextSwatch?(e=c.width()-h.BORDER_WIDTH,n=c.height()-h.BORDER_WIDTH):(n=c.find(".swatch-image-container"),m=0<n.closest(".reduced-image-swatch-margin").length,e=n.outerWidth(),n=n.outerHeight(),m=m?h.REDUCED_IMAGE_SWATCH_SPACING:h.DEFAULT_IMAGE_SWATCH_SPACING,k.css({marginLeft:m/2+"px",marginRight:m/
2+"px"}));k.width(e);k.height(n);b.each(c,function(){f.append(k.clone().addClass("side-sheet-loader-1"))});e=f.clone();e.find(".side-sheet-loader-1").removeClass("side-sheet-loader-1").addClass("side-sheet-loader-2");d.append(e);a=g(a);d.prepend(a);d=d[0].outerHTML;this.sideSheet.updateWidth(this.getWidth(c,m));this.sideSheet.open(d)},update:function(a){this.mainViewDimContainer=t("#inline-twister-row-"+a.dimKey+" #tp-inline-twister-dim-values-container");var c=this.mainViewDimContainer.clone(),d=
c.find(B.DIMENSION_VALUES_LIST);d.attr("id",a.dimKey+"dim_list");var b=g(a);c.prepend(b);d.children().slice(1).removeClass("aok-hidden");d.attr("data-a-button-group",'{"name":"sec_'+a.dimKey+'"}');this.sideSheet.updateContent(c[0].outerHTML);a=this.sideSheet.container;this.swatchList=a.find(B.DIMENSION_VALUES_LIST).children().slice(1);k(this.swatchList,this.activeDimKey);this.dimValContainer=a.find(".desktop-configurator-side-sheet-content-header .dim-value");q.call(this,this.swatchList)},close:function(){this.sideSheet.close()},
registerToggleButtonGroup:function(a,c,d){var g=B.SEC_VIEW_TOGGLE_BUTTON_PREFIX+a,f=this;this.updateSideSheetStatus[a]=d;b.on("a:button-group:"+g+":toggle",function(e){f.sideSheet.close();e.selectedButton.buttonGroupName=a;c(e.selectedButton,a)})},updateDimVal:function(a){this.dimValContainer&&this.dimValContainer.length&&this.dimValContainer.text(a.subText)},getScrollbarWidth:function(){if(this.scrollbarWidth)return this.scrollbarWidth;var a=document.body?C.innerWidth-document.body.clientWidth:-1;
0>a&&(a=h.DEFAULT_SCROLLER_WIDTH);return a},getWidth:function(a,c){var d=0;b.each(a,function(a){d+=a.getBoundingClientRect().width+c});return d+h.SIDE_SHEET_PADDING+this.scrollbarWidth}};return p});"use strict";z.when("A","a-popover","desktop-configurator-constants").register("desktop-configurator-popover-factory",function(b,h,r){function p(a){var c=m("\x3cdiv /\x3e"),d=m("\x3cspan /\x3e"),b=a.title,g=a.showImageInPopOver,u=!a.hideSlots;c.addClass("desktop-configurator-popover-content");d.addClass("desktop-configurator-title-block a-size-base a-color-base a-text-bold");
d.text(b);c.append(d);g&&(d=m("\x3cdiv /\x3e"),g=m("\x3cimg /\x3e"),g.attr("src",a.image),g.attr("data-a-image-source",a.image),g.attr("alt",b),d.append(g),c.addClass("visual-dimension"),d.addClass("desktop-configurator-image-block"),c.prepend(d));u&&f(c,a.slotNode);return c}function f(a,c){c="string"===typeof c?c:c.clone();var d=m("\x3cdiv /\x3e");a.find(".desktop-configurator-slot-block").remove();d.addClass("desktop-configurator-slot-block");d.html(c);k(d);a.append(d)}function k(a){var c=a.find(".price_slot_ppu"),
g=a.find("#ms3slot"),f=a.find(".twister_swatch_price"),m=a.find("#twisterAvailability"),k=a.find("#deliveryPromisePrefix"),h=a.find(".variationReviewsSection"),v=a.find(".default-slot-unavailable"),t=a.find(".loading-indicator-1");a=a.find(".twisterPrimeWardrobe");var q={variationReviews:h,price:f,ms3:g,twisterAvailability:m.parent(),deliveryPromise:k.parent(),ppu:c,twisterPrimeWardrobe:a};t.length&&(t.addClass("loading-indicator-in-popover"),0===d.length?t.addClass("aok-hidden"):t.removeClass("aok-hidden"));
b.each(u,function(a){q[a]&&(-1===d.indexOf(a)?q[a].addClass("aok-hidden"):(q[a].removeClass("aok-hidden"),a=w[a+"_styleSlot"],"function"===typeof a&&a.call(this,q)))});v.length&&v.removeClass("a-size-small").addClass("a-size-base")}function q(a,c,d,f){d=p({slotNode:d.slotNode,title:d.title,showImageInPopOver:d.showImageInPopOver,image:d.image,hideSlots:f});c=h.create(c,{name:a,inlineContent:d,closeButton:!1,padding:"none",activate:"none",restoreFocusOnHide:!1});g[a]=c;t[a]||(b.on("a:popover:afterShow:"+
a,function(a){b.delay(function(){m(x.DIMENSION_VALUES_LIST).removeClass("stop-scrolling-dc")})}),t[a]=!0);return c}function v(a,c,d){if(a=g[a])c=p({slotNode:c.slotNode,title:c.title,showImageInPopOver:c.showImageInPopOver,image:c.image,hideSlots:d}),a.update({content:c});return a}var m=b.$,g={},t={},B=r.POPOVER_DELAY,x=r.sideSheetSelectors,a=null,c=null,d=[],u=r.CONFIGURED_SLOTS,w={price_styleSlot:function(a){var c=a.ppu;a=a.price;a.length&&(a.find(".a-size-base").removeClass("a-size-base").addClass("a-size-large"),
c.length&&c.removeClass("a-size-micro").addClass("a-size-small"))},ms3_styleSlot:function(a){a=a.ms3;a.length&&a.find(".a-icon-mini").removeClass("a-icon-mini").addClass("a-icon-small")},twisterAvailability_styleSlot:function(a){var c=a.twisterAvailability;c.length&&(a=a.ms3,c.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base"),a.length&&a.after(c))},deliveryPromise_styleSlot:function(a){a=a.deliveryPromise;a.length&&a.addClass("a-size-base")}};return{show:function(d,g,f,u){a=
this.exists(d)?v.call(this,d,f,u):q.call(this,d,g,f,u);clearTimeout(c);var k=this;c=b.delay(function(){m(x.DIMENSION_VALUES_LIST).addClass("stop-scrolling-dc");a&&a.show();k.updateIfCurrentlyActive(d,f.slotNode)},B)},exists:function(a){return!!g[a]},hide:function(d){(d=g[d])&&d.hide();a=null;clearTimeout(c)},updateIfCurrentlyActive:function(c,d){a&&a.$container&&a.attributes.name===c&&(c=a.$container.find(".desktop-configurator-popover-content"),f(c,d))},destroy:function(a){g[a]&&h.remove(a);delete g[a];
clearTimeout(c)},setVisibleSlotConfig:function(a){d=a}}});"use strict";z.when("A").register("desktop-configurator-twister-register",function(){var b=[];return{registerModifier:function(h){b.push(h)},executeModifiers:function(h){b.forEach(function(b){b.modify&&"function"===typeof b.modify&&b.modify(h)})}}});z.when("3p-promise").register("desktop-configurator-price-mismatch-promise-handler",function(b){function h(k){f.hasOwnProperty(k)&&(f[k].reject(),delete f[k]);f[k]={};return new b(function(b,m){f[k].resolve=
b;f[k].reject=m})}function r(b){for(var k=Object.keys(f).filter(function(g){return g.startsWith(b)}),m=0;m<k.length;m++){var g=k[m];f.hasOwnProperty(g)&&(f[g].resolve(),delete f[g])}}function p(b){for(var k=Object.keys(f).filter(function(g){return g.startsWith(b)}),m=0;m<k.length;m++){var g=k[m];f.hasOwnProperty(g)&&(f[g].reject(),delete f[g])}}var f={},k;return{getPromises:function(b,f){var m=[];m.push(h("TwisterUpdate_"+f));m.push(h("DimensionSlots_"+f));k=b;return m},resolveDimensionSlotPromise:function(){r("DimensionSlots")},
resolveTwisterUpdatePromise:function(b){k===b?r("TwisterUpdate"):p("TwisterUpdate")},getLandingPromise:function(b){var f=[];f.push(h("DimensionSlots_"+b));return f},rejectDimensionSlotPromise:function(){p("DimensionSlots")}}});z.when("A","desktop-configurator-price-mismatch-promise-handler","3p-promise").register("desktop-configurator-price-mismatch-utils",function(b,h,r){function p(b){return b.replace(/\n/g,"").replace(/[\t ]+\</g,"\x3c").replace(/\>[\t ]+\</g,"\x3e\x3c").replace(/\>[\t ]+$/g,"\x3e")}
function f(f,m){var g=k("#desktop_configurator_price_mismatch_div .twister_swatch_price.unified-price");g.addClass("inline-twister-swatch-price");var h=g.find(".price_slot_ppu"),r=g.find(".a-price"),x=m.find(".a-price");0<r.length&&0<x.length?x[0].dataset&&(r[0].dataset.aSize=x[0].dataset.aSize):(g.find(".a-size-small").removeClass("a-size-small").addClass("a-size-base").addClass("a-color-base"),g.find(".a-size-mini").removeClass("a-size-mini").addClass("a-size-base").addClass("a-color-base"),g.find(".a-size-large").removeClass("a-size-large").addClass("a-size-base").addClass("a-color-base"));
r="a-size-small";g.find(".olpWrapper").removeClass("a-size-mini a-size-micro a-size-medium a-size-large a-size-base a-color-base").addClass(r);h.length&&(r="twister-plus-inline-twister-ppu a-size-micro",h.removeClass("a-size-mini a-size-small a-size-medium a-size-large a-size-base a-color-base").addClass(r));m=m.find(".twister_swatch_price.unified-price");if(m.length&&g.length){var h=m.clone(),r=g.clone(),x=h.find(".price_slot_ppu"),a=r.find(".price_slot_ppu");x.length&&x.html(b.trim(x.html()));a.length&&
a.html(b.trim(a.html()));b.trim(p(h.html()))!==b.trim(p(r.html()))&&(f.logCounter("desktopConfiguratorPriceMismatchCounter"),m.html(g.html()),(f=k("#desktop_configurator_price_mismatch_div #asinInfo").attr("data-asin"))&&(q[f]=g.html()))}}var k=b.$,q={};b.on("DesktopConfiguratorPriceMismatchDataUpdated",h.resolveTwisterUpdatePromise);return{createLandingPromises:function(b,m){var g=k("#inline-twister-row-"+m+" .a-button-selected");g&&(m=h.getLandingPromise(m),r.all(m).then(function(){f(b,g)},function(){}))},
createTwisterUpdatePromises:function(b,m,g,t,p){if(b){var q=k("#inline-twister-row-"+p+" .a-button-selected");b=g.selected().selectionInfo();g=t.util.isFullySelected(b);t=t.util.getAsinFromSelectionInfo(b,g);p=h.getPromises(t,p);r.all(p).then(function(){f(m,q)},function(){})}},handleDimensionSlotPromise:function(b){var f=k(b).closest(".a-button-selected");b=0<k(b).find(".loading-indicator-1").length;f.length&&!b&&f.closest(".inline-twister-row").length&&(k(".inline-twister-row .a-button-selected .twister_swatch_price.unified-price").length?
h.resolveDimensionSlotPromise():h.rejectDimensionSlotPromise())},updateSlotHtm:function(b,f){var g;f&&q[f]&&(g=q[f]);if(f=g)b=k("\x3cdiv\x3e"+b+"\x3c/div\x3e"),b.find(".twister_swatch_price.unified-price").html(f),b=b.html();return b}}});"use strict";z.when("A","desktop-configurator-constants").register("desktop-configurator-widgets-factory",function(b,h){var r=b.$,p=h.widgetSelectors,f=h.classes,k=h.cssConstants,q=h.loggingConstants;h=function(){function g(){var a=r(p.IMAGE_THUMBNAIL).attr("src");
return a&&a.length&&(a=a.split("."),2<a.length)?a[a.length-2]:!1}function f(a,c,d,b){b=b&&0<b.length?b:a.find(".a-button");c&&!d?(b.addClass("text-swatch-button-with-slots").removeClass("text-swatch-button"),a.find("hr").show(),a.find("hr").removeClass("aok-hidden")):(b.removeClass("text-swatch-button-with-slots").addClass("text-swatch-button"),a.find("hr").hide(),a.find("hr").addClass("aok-hidden"))}return{alignTextSwatches:function(a,c,d){var g=0,f,e;b.each(a,function(a){a.domNode&&(a.isVisible||
c||d)&&(f=a.domNode.attr("data-idxInToggleSwatchList"),e=d?r("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+f+"]"):a.domNode,a=e.find(".swatch-title-text-display"),a.length&&a[0].style.removeProperty("height"),a=a?a.height():0,g<a&&(g=a))});b.each(a,function(a){a.domNode&&(a.isVisible||c||d)&&(f=a.domNode.attr("data-idxInToggleSwatchList"),e=d?r("#desktop-configurator-side-sheet").find("[data-idxInToggleSwatchList\x3d"+f+"]"):a.domNode,e.find(".swatch-title-text-display").height(g))})},
createSwatch:function(a,c,d,b,g,e,k){var h=!c.unavailable,m=c.isVisible,p=c.selected,t=c.showSlot,r=c.slotHtm;d="#"+d;if(e.length)return e=e.clone(),e.removeClass("swatch-prototype"),g&&e.addClass("slots-hidden"),e.attr("data-idxInToggleSwatchList",b),b=e.find(d).attr("id",c.id),e.find(d+"-announce").attr("id",c.id+"-announce"),e.find("input").attr({name:c.name,"aria-labelledby":c.id+"-announce"}),e.find("text"===a?".swatch-title-text-display":"square_image"===a?".swatch-title-text":".swatch-text").text(c.text),
h||b.addClass("a-button-unavailable"),p&&b.addClass("a-button-selected"),"text"!==a&&(p=e.find(".swatch-image"),p.addClass("inline-twister-manual-load"),p.attr({"data-a-image-source":c.image||"",id:"inline-twister-image-"+c.name,alt:c.text})),p=e.find(".dimension-slot-info"),p.length&&(p.attr("id","dimension-slot-info-"+c.name),t?h?0<r.length&&p.html(r):p.html(c.defaultSlotUnavailable):e.find("text"===a?".slots-padding":".dimension-slot-info").addClass("aok-hidden"),"text"===a&&f(e,t,g,b)),k.append(e),
m||e.addClass("aok-hidden"),e},getThumbnailImageUrlForPhysicalId:function(a){return a&&a.length&&(a=a.split("."),2<a.length)?(a.splice(-2,1,g()),a.join(".")):!1},updateSlotSectionInTextSwatch:f}}();var v=function(g){function k(a,c,d,b,f,e,h,m){this.id=a.id;this.unavailable=!!a.unavailable;this.selected=!!a.selected;this.showSlot=a.showSlot;this.slotHtm=a.slotHtm;this.isImageSwatch=!c;this.asin=a.asin;this.pageUrl=a.pageUrl;this.hideSlotsFromMainView=f;var p=c?"text":a.isCirclularImageSwatch?"circular_image":
"square_image";this.domNode=m?r(m):g.createSwatch(p,a,d,b,f,e,h);this.isVisible=a.isVisible;this.imageUrl=a.image;this.popoverImage=a.popoverImage;this.isSlotVisible=!0;this.slotNodeIdentifier=c?".slots-padding":".dimension-slot-info";this.title=a.text;this.name=a.name;this.subscribeToHoverEvent(d)}k.prototype={setState:function(a,c,d,b){this.selected=!!a.selected;this.updateAvailablity(a);this.updateSlotNode(a,c,d);this.updateVisibility(a);this.updateSwatchIndexInDomNode(b);return this},getSlotNode:function(a){this.slotNode||
(this.slotNode=this.domNode.find(p.SLOT_NODE_SELECTOR));if(!a)return this.slotNode;a=this.slotNode?this.slotNode.attr("id"):"";return r("#desktop-configurator-side-sheet").find("#"+a)},updateSlotNode:function(a,c,d){this.slotNode||(this.slotNode=this.domNode.find(p.SLOT_NODE_SELECTOR));this.showSlot!==a.showSlot&&((this.showSlot=a.showSlot)?this.domNode.find(this.slotNodeIdentifier).removeClass("aok-hidden"):this.domNode.find(this.slotNodeIdentifier).addClass("aok-hidden"),this.isImageSwatch||g.updateSlotSectionInTextSwatch(this.domNode,
this.showSlot,this.hideSlotsFromMainView));this.slotHtm!==a.slotHtm&&(c&&r("#tp-inline-twister-sec-view-"+d+" #"+this.slotNode.attr("id")).html(a.slotHtm),this.slotNode.html(a.slotHtm),this.slotHtm=a.slotHtm)},updateAvailablity:function(a){this.toggleButton||(this.toggleButton=this.domNode.find(p.TOGGLE_BUTTON_SELECTOR));(this.unavailable=a.unavailable)?this.toggleButton.addClass(f.A_BUTTON_UNAVAILABLE):this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)},updateSelection:function(){this.toggleButton||
(this.toggleButton=this.domNode.find(p.TOGGLE_BUTTON_SELECTOR));this.selected?(this.toggleButton.addClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_UNAVAILABLE)):(this.toggleButton.removeClass(f.A_BUTTON_SELECTED),this.toggleButton.removeClass(f.A_BUTTON_FOCUS))},updateVisibility:function(a){a.isVisible?this.domNode.removeClass(f.AOK_HIDDEN):this.domNode.addClass(f.AOK_HIDDEN);this.isVisible=a.isVisible},subscribeToHoverEvent:function(a){a="desktop-configurator-swatch-hover:"+
a;try{b.declarative.remove(this.domNode,a),b.declarative.create(this.domNode,a,{})}catch(c){z.log("Hover event subscribe failed with error: "+this.name,q.ERROR,q.ATTRIBUTION)}},updateSwatchIndexInDomNode:function(a){this.domNode&&this.domNode.attr("data-idxInToggleSwatchList",a)},getTopPosition:function(){var a=this.domNode.position();return this.topPosition=a?a.top:0}};return k}(h),m=function(g,k){function a(a,d,g,f){var e=this;this.isTextSwatch=a.isTextSwatch;this.name=a.name;this.domNode=r(p.EXPANDER_CONTENT_PREFIX+
a.name);this.title=f;this.selectedSwatch=null;this.swatches={};this.orderedSwatchList=[];this.initialVisibleSwatchList={};this.swatchIdxOrder=[];this.isPageRefreshActive=!1;this.totalSwatchCount=a.totalSwatchCount||0;this.onChange=a.onChange;this.hoverHandler=a.onHover;this.isUserInteracting=!1;this.autoNotificationCallback=d.autoNotificationCallback;this.rowContainer=g;this.swatchListContainer=this.domNode.find(p.DIMENSION_VALUES_LIST);this.markAutoUpdated=!1;this.hideSlotsFromMainView=a.hideSlotsFromMainView;
this.windowResizeCallback=d.windowResizeCallback;this.preserveNaturalSwatchOrder=a.preserveNaturalSwatchOrder;this.displaySwatches=[];this.numberOfSwatchesPerRow=0;this.swatchPrototypeNode=r("#"+a.name).closest(p.SWATCH_NODE_SELECTOR);this.swatchPrototypeNodeParent=this.swatchPrototypeNode.parent();b.on("a:button-group:"+this.name+":toggle",function(a){var c=parseInt(a.selectedButton.buttonName,10),d=e.swatches[c];d?e.isPageRefreshActive?(e.isUserInteracting=!0,c=d.unavailable,d.updateSelection(),
e.autoNotificationCallback&&e.autoNotificationCallback(c,!0),e.onChange&&e.onChange(e.swatches,a.selectedButton,e.markAutoUpdated),e.setAutoUpdated(!1)):d.pageUrl&&(C.location.href=d.pageUrl):(a="Selected swatch not found on toggle button click. Value clicked: "+c+" ; Swatch length: "+Object.keys(e.swatches).length,z.log(a,q.ERROR,q.ATTRIBUTION))});this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name);this.registerHoverDeclarative("desktop-configurator-swatch-hover:"+a.name+"_sec",
!0);if(this.isTextSwatch)b.on("resize",function(){0<e.displaySwatches.length&&(e.repopulateDisplaySwatches(),e.alignTextSwatches(),e.alignTextSwatchNodesInLastRow(),"function"===typeof e.windowResizeCallback&&e.windowResizeCallback(e.name))})}a.prototype={setState:function(a,d,g,f){var e=this,h,m=[],p=[],t=[];b.objectIsEmpty(d)||(b.each(d,function(d,b){if(!e.swatches[b]&&(a.swatches[b].isVisible||g)){var f=new k(a.swatches[b],e.isTextSwatch,e.name,b,e.hideSlotsFromMainView,e.swatchPrototypeNode,e.swatchPrototypeNodeParent);
f.subscribeToHoverEvent(e.name);e.swatches[b]=f;!e.isTextSwatch&&e.swatches[b]&&e.swatches[b].domNode&&t.push(e.swatches[b].domNode.find(".inline-twister-manual-load")[0])}p[d]=b}),this.swatchIdxOrder=p,f||(this.resetToggleSwatchContainer(),this.displaySwatches=[]),b.each(this.swatchIdxOrder,function(a,c){if(a=e.swatches[a])a&&e.swatchListContainer.append(a.domNode),a&&a.subscribeToHoverEvent(e.name),e.addToDisplaySwatches(a,e.displaySwatches)}));b.each(a.swatches,function(a,c){if(e.swatches[c])h=
a.selected?e.swatches[c]:h,e.swatches[c].selected=!!a.selected,m.push({index:c,data:a});else{if(a.isVisible||g)e.swatches[c]=new k(a,e.isTextSwatch,e.name,c,e.hideSlotsFromMainView,e.swatchPrototypeNode,e.swatchPrototypeNodeParent),e.swatches[c].subscribeToHoverEvent(e.name),e.addToDisplaySwatches(e.swatches[c],e.displaySwatches),!e.isTextSwatch&&e.swatches[c]&&e.swatches[c].domNode&&t.push(e.swatches[c].domNode.find(".inline-twister-manual-load")[0]);a.selected&&(h=e.swatches[c])}});this.selectedSwatch&&
this.selectedSwatch.updateSelection();h&&h.updateSelection();b.each(m,function(a,c){e.swatches[a.index].setState(a.data,g,e.name,a.index)});this.isTextSwatch&&(b.objectIsEmpty(d)?this.alignTextSwatchNodesInLastRow():this.alignTextSwatches());e.selectedSwatch&&h&&e.selectedSwatch!==h&&!e.isUserInteracting&&e.autoNotificationCallback(!0);e.selectedSwatch=h;e.isUserInteracting=!1;t.length&&b.loadImageManually(t);return this},getSlotNodes:function(a){return b.map(this.displaySwatches,function(d){return b.map(d,
function(d){return d.getSlotNode(a)})})},setUserInteracting:function(a){this.isUserInteracting=a},alignTextSwatches:function(a,d){b.each(this.displaySwatches,function(b){g.alignTextSwatches(b,a,d)})},alignTextSwatchNodesInLastRow:function(){var a=this.domNode.find(".inline-twister-swatch:not(.aok-hidden):not(.swatch-prototype)");if(1<a.length){var d=a[a.length-1],f=a[a.length-2];d&&f&&d.getBoundingClientRect().top===f.getBoundingClientRect().top&&(a=b.map(a.slice(a.length-(a.length%this.numberOfSwatchesPerRow||
this.numberOfSwatchesPerRow),a.length),function(a){return this.swatches[a.getAttribute("data-idxInToggleSwatchList")]},this),g.alignTextSwatches(a))}},resetToggleSwatchContainer:function(){var a=r(this.domNode.find(".a-button-list").children()[0]);this.swatchListContainer.html("");this.swatchListContainer.append(a)},getVisibleSwatchesSize:function(){var a=0;b.each(this.swatches,function(d,b){d.isVisible&&(a+=1)});return a},setAutoUpdated:function(a){this.markAutoUpdated=a},getInitialVisibleSwatchList:function(){return this.initialVisibleSwatchList},
getNumberOfSwatchesPerRow:function(){return this.numberOfSwatchesPerRow},setNumberOfSwatchesPerRow:function(a){a&&(this.numberOfSwatchesPerRow=a)},createSwatch:function(a,d){d=new k(a,this.isTextSwatch,this.name,a.name,this.hideSlotsFromMainView,this.swatchPrototypeNode,this.swatchPrototypeNodeParent,d);this.swatches[a.name]=d;this.initialVisibleSwatchList[a.name]=d;this.selectedSwatch=a.selected?d:this.selectedSwatch;this.orderedSwatchList.push(d);return d},activatePageRefresh:function(){this.isPageRefreshActive=
!0;this.domNode.find(".page-load-link").remove()},getSwatch:function(a){return this.swatches[a]?this.swatches[a]:{}},registerHoverDeclarative:function(a,d){var g=this;b.declarative(a,"mouseenter mouseleave",function(a){var c=a.$currentTarget[0].getAttribute("data-idxInToggleSwatchList"),c=g.getSwatch(c);a.data={slotNode:a.$currentTarget.find(c.slotNodeIdentifier),showImageInPopOver:c.isImageSwatch&&!!c.popoverImage,unavailable:c.unavailable,showSlot:c.showSlot,selected:c.selected,title:c.title,name:c.name,
id:d?c.id+"_sec":c.id,image:c.popoverImage};g.hoverHandler(g.name,a)})},addToDisplaySwatches:function(a,d){var b=f.ROW_IDENTIFIER_PREFIX;if(0===d.length)d.push([a]);else{var g=d[d.length-1];g&&g.length===this.numberOfSwatchesPerRow?d.push([a]):g.push(a)}this.removeSwatchRowIdentifier(a);a.domNode&&a.domNode.addClass(b+(d.length-1).toString())},repopulateDisplaySwatches:function(){if(0!==this.displaySwatches.length){var a=[],d=0,g,k=this;b.each(this.displaySwatches,function(e,h){b.each(e,function(b,
e){0===a.length?a.push([b]):0===d?(g=a[0][a[0].length-1],b.getTopPosition()!==g.getTopPosition()?(d=a[0].length,k.numberOfSwatchesPerRow=d,k.addToDisplaySwatches(b,a)):(a[0].push(b),k.removeSwatchRowIdentifier(b),b.domNode&&b.domNode.addClass(f.ROW_IDENTIFIER_PREFIX+(0).toString()))):k.addToDisplaySwatches(b,a)})});0===d&&(this.numberOfSwatchesPerRow=d=a[0].length);this.displaySwatches=a}},removeSwatchRowIdentifier:function(a){a.domNode&&a.domNode.removeClass(function(a,c){return(c.match(/(^|\s)desktop-configurator-dim-row-\S+/g)||
[]).join(" ")})},createDisplaySwatches:function(){var a=this;b.each(this.orderedSwatchList,function(d){a.addToDisplaySwatches(d,a.displaySwatches)})},removeMisplacedSwatch:function(){var a=this.displaySwatches[this.displaySwatches.length-1],d=a[a.length-1],b=d.name;d.domNode&&d.domNode.remove();delete this.swatches[b];this.selectedSwatch&&this.selectedSwatch.name===b&&(this.selectedSwatch=null);1<a.length?a.pop():this.displaySwatches.pop()},removeInitiallyHiddenSwatches:function(){for(var a=this.domNode.find(".inline-twister-swatch.aok-hidden:not(.swatch-prototype)"),
d=a.length-1;0<=d;d--){var b=a[d];b.parentNode.removeChild(b)}}};return a}(h,v),g=function(g){function f(a){this.mainText=a.mainText;this.subText=a.subText;this.dimKey=a.dimKey;this.titleSelectorPrefix=a.titleSelectorPrefix;this.titleValueSelector=a.titleValueSelector;this.domNode=r("#"+this.titleSelectorPrefix+this.dimKey)}f.prototype={refresh:function(){this.domNode.find("."+this.titleValueSelector).text(this.subText);this.domNode.removeClass("twister-plus-inline-twister-dim-required twister-plus-inline-twister-dim-required-delay")},
setState:function(a){return b.equals(a,r.extend({},this))?this:(r.extend(this,a),this.refresh())},getData:function(){return{mainText:this.mainText,subText:this.subText}}};return f}(h),t=function(g,h,a){function c(a,c,g,e,m){function t(){v=v||q.domNode.find(".dimension-heading");v.css(k.BG_COLOR,k.GREEN_BG_COLOR);b.delay(function(){b.animate(v,{"background-color":k.WHITE_BG_COLOR},200)},1E3)}var q=this;this.disableCollapseFunctionality=g.inlineTwisterData?g.inlineTwisterData.disableCollapseFunctionality:
!1;this.stringTranslationMap=g.inlineTwisterData?g.inlineTwisterData.stringTranslationMap:{};this.title=c?new h(c):null;this.dimKey=g.dimKey;this.domNode=r("#"+a+this.dimKey);this.showSlot=g.showSlot;this.logger=m;this.isTwisterCoreInitialized=this.markAutoUpdated=!1;this.expanderContent=q.domNode.find(p.EXPANDER_CONTENT_PREFIX+this.dimKey);this.expanderHeader=q.domNode.find(p.EXPANDER_HEADER_PREFIX+this.dimKey);this.icon=q.domNode.find(p.DIMENSION_EXPANDER_ICON_PREFIX+this.dimKey);this.expandedText=
q.domNode.find(p.EXPANDED_DIMENSION_TEXT_PREFIX+this.dimKey);this.collapsedText=q.domNode.find(p.COLLAPSED_DIMENSION_TEXT_PREFIX+this.dimKey);this.rowCallbacks=e;this.autoNotificationExpanded=q.domNode.find(p.AUTO_NOTIFICATION_EXPANDED);this.autoNotificationExpandedText=q.autoNotificationExpanded.text();this.imageThumbnail=q.domNode.find(p.IMAGE_THUMBNAIL);this.sideSheetLink=this.domNode.find(".tp-side-sheet-link-container");this.isExpanded=this.expanderContent.hasClass("dimension-expander-content-expand");
var v;this.autoNotificationCallback=function(a,c){var d=q.autoNotificationExpandedText;a?q.isExpanded&&c?(q.autoNotificationExpanded.find("."+f.A_COLOR_ATTAINABLE).html(d),q.autoNotificationExpanded.removeClass(f.AOK_HIDDEN)):(t(),q.setAutoUpdated(!0)):q.hideAutoNotification()};this.disableCollapseFunctionality||b.declarative("toggle-dimension-expander-"+this.dimKey,"click",function(a){q.isExpanded?q.collapse():q.expand();q.hideAutoNotification()})}c.prototype={setState:function(a,c,b,e,g,k){this.toggleSwatch&&
b!==this.dimKey&&this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);a&&this.toggleSwatch&&this.toggleSwatch.setState(a,c,g,k);g||e&&this.title&&this.title.setState(e)},expand:function(){this.expanderContent&&this.expanderContent.css("visibility","");this.expanderContent&&this.expanderContent.addClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);this.icon&&this.icon.addClass(f.ROTATE);this.expandedText&&this.expandedText.removeClass(f.AOK_HIDDEN);this.collapsedText&&this.collapsedText.addClass(f.AOK_HIDDEN);
this.imageThumbnail.addClass(f.AOK_HIDDEN);this.isExpanded=!0;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",c=this.title.getData(),a=a.replace("###dimension",c.mainText).replace("###value",c.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToCollapse:
"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(p.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}this.markAutoUpdated&&(this.logger.logDimExpansionAfterAutoUpdate(),this.markAutoUpdated=!1)},collapse:function(){this.expanderContent&&this.expanderContent.removeClass(f.DIMENSION_EXPANDER_CONTENT_EXPAND);this.expanderContent&&this.expanderContent.css("visibility","hidden");this.icon&&this.icon.removeClass(f.ROTATE);this.expandedText&&this.expandedText.addClass(f.AOK_HIDDEN);
this.collapsedText&&this.collapsedText.removeClass(f.AOK_HIDDEN);this.imageThumbnail.removeClass(f.AOK_HIDDEN);this.isExpanded=!1;var a={dimKey:this.dimKey};"function"===typeof this.rowCallbacks.handleDimensionExpansion&&this.isTwisterCoreInitialized&&this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!1);this.autoNotificationExpanded.addClass(f.AOK_HIDDEN);if(this.expanderHeader){var a=this.stringTranslationMap?this.stringTranslationMap.expanderHeaderAriaLabel:"",c=this.title.getData(),a=
a.replace("###dimension",c.mainText).replace("###value",c.subText),a=a+" "+(this.stringTranslationMap?this.stringTranslationMap.tapToExpand:"");this.expanderHeader.attr("aria-label",a);this.expanderHeader.find(p.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)}},setUserInteracting:function(a){this.toggleSwatch&&this.toggleSwatch.setUserInteracting(a)},setExpanderHeaderAriaLabel:function(a,c){a=this.expanderHeader.attr("aria-label").replace(a.subText,c.subText);this.expanderHeader.attr("aria-label",
a);this.expanderHeader.find(p.DIMENSION_EXPANDER_ICON_WRAPPER).attr("aria-label",a)},setThumbnailImage:function(a){(a=g.getThumbnailImageUrlForPhysicalId(a))&&this.imageThumbnail.attr("src",a)},setAutoUpdated:function(a){this.markAutoUpdated=a;this.toggleSwatch&&this.toggleSwatch.setAutoUpdated(a)},getInitialVisibleSwatchList:function(){return this.toggleSwatch?this.toggleSwatch.getInitialVisibleSwatchList():{}},getSwatch:function(a){return this.toggleSwatch?this.toggleSwatch.getSwatch(a):{}},activatePageRefresh:function(){this.toggleSwatch&&
this.toggleSwatch.activatePageRefresh()},showSideSheetLink:function(){this.sideSheetLink.removeClass("aok-hidden")},hideSideSheetLink:function(){this.sideSheetLink.addClass("aok-hidden")},setMaxHeight:function(a){this.expanderContent.css("max-height",a)},triggerExpandOrCollapseAnimation:function(a,c,b){var e=this;this.expanderContent.animate({"max-height":a+"px"},c,function(){e.setMaxHeight("");b&&b()})},getDisplaySwatches:function(){return this.toggleSwatch?this.toggleSwatch.displaySwatches:[]},
createDisplaySwatches:function(){this.toggleSwatch&&this.toggleSwatch.createDisplaySwatches()},hideAutoNotification:function(){this.autoNotificationExpanded.addClass(f.AOK_HIDDEN)},initializeComponents:function(c,g,f){if(!this.toggleSwatch&&c){var e=this.title.getData();this.toggleSwatch=new a(c,{windowResizeCallback:f.handleWindowResize,autoNotificationCallback:this.autoNotificationCallback},this.domNode,e.mainText)}this.isTextSwatch=c?c.isTextSwatch:!0;this.rowCallbacks=b.extend(this.rowCallbacks,
f);this.totalSwatchCount=c?c.totalSwatchCount:0;this.showSlot=g;var k=this;b.declarative("open-desktop-configurator-side-sheet:"+this.dimKey,"click",function(){"function"===typeof k.rowCallbacks.showSideSheet&&k.isTwisterCoreInitialized&&(k.rowCallbacks.showSideSheet(k.dimKey,k.showSlot,k.title.getData()),k.hideAutoNotification())})},postInitialize:function(){this.isTwisterCoreInitialized=!0;var a={dimKey:this.dimKey};this.toggleSwatch&&this.toggleSwatch.removeInitiallyHiddenSwatches();this.isExpanded&&
this.rowCallbacks.handleDimensionExpansion(a,this.showSlot,!0)}};return c}(h,g,m);return{Swatch:v,ToggleSwatch:m,Title:g,Row:t,utils:h}});"use strict";z.when("A","detail-page-side-sheet-handlers").register("detail-page-side-sheet",function(b,h){function r(b){var k=b.id&&"string"===typeof b.id,m=1===v("#"+b.id).length;if(k&&m)this.id=b.id,this.shouldRenderHTMLString=!!b.shouldRenderHTMLString,this.animationDuration=b.animationDuration||300,this.container=h.getContainer(b.id),this.onBeforeShow=b.onBeforeShow,
this.onAfterHide=b.onAfterHide,k=b.width||580,(m=this.container)&&m.width(k),q(b.id,k),f.call(this);else throw b="Side sheet initialisation failed: "+(k?"Side sheet not present in DOM, or multiple instances of side sheet ID "+b.id+" exist":"Invalid Side sheet ID"),z.log(b,"ERROR","DetailPageSideSheet"),b;}function p(b){var f=this.container;b=this.shouldRenderHTMLString?v(b):v(b).clone();f.html(b);b.css("display","block");f.removeClass("aok-hidden")}function f(){var f=this;b.declarative("close-detail-page-side-sheet:"+
this.id,"click",function(){f.close()});b.declarative("open-detail-page-side-sheet:"+this.id,"click",function(b){f.open(b&&b.data?b.data.content:null)})}function k(b){b.code&&"escape"===b.code.toLowerCase()&&(this.close(),document&&document.removeEventListener("keydown",m))}function q(b,f){b=v("#"+b+"-background .close-button");b.length&&(b[0].style.marginRight=f+10+"px")}var v=b.$,m=null;r.prototype={open:function(b){if(b&&"string"===typeof b){p.call(this,b);if(this.onBeforeShow)this.onBeforeShow();
h.showSideSheet(this.id,this.animationDuration);m=k.bind(this);document&&document.addEventListener("keydown",m)}else z.log("Invalid side sheet content. Side sheet ID: "+this.id,"ERROR","DetailPageSideSheet")},close:function(){h.closeSideSheet(this.id,this.animationDuration);h.resetSideSheetContainer(this.container);if(this.onAfterHide)this.onAfterHide()},updateWidth:function(b){var f=this.container;f&&f.width(b);q(this.id,b)},updateContent:function(b){b&&"string"===typeof b?p.call(this,b):z.log("Invalid side sheet content. Side sheet ID: "+
this.id,"ERROR","DetailPageSideSheet")}};return r});"use strict";z.when("A").register("detail-page-side-sheet-handlers",function(b){function h(b,h){f("#"+b+" .detail-page-side-sheet-content").show(function(){p({right:"0px"},b,h)})}function r(b,h){f("#"+b+" .detail-page-side-sheet-content").show(function(){p({right:"-600px"},b,h)})}function p(k,h,p){b.animate(f("#"+h+" .detail-page-side-sheet-content"),k,p)}var f=b.$;return{showSideSheet:function(b,p){f("body").css("overflow","hidden");f(".detail-page-side-sheet-darken-bg").removeClass("aok-hidden");
f("#"+b).removeClass("aok-hidden");h(b,p)},closeSideSheet:function(b,h){r(b,h);f(".detail-page-side-sheet-darken-bg").addClass("aok-hidden");f("#"+b).addClass("aok-hidden");f("body").css("overflow","scroll")},getContainer:function(b){return f("#"+b).find(".detail-page-side-sheet-content")},resetSideSheetContainer:function(b){b.html("")}}})});