(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4120],{10084:e=>{e.exports={overlayContainer:"AuthModal_overlayContainer__NGDeo",topContainer:"AuthModal_topContainer__RNiIT",bottomContainer:"AuthModal_bottomContainer__tfSR3",socialButton:"AuthModal_socialButton__mPYtF",googleButton:"AuthModal_googleButton__ccm50",headingContainer:"AuthModal_headingContainer__09yUa",contentContainer:"AuthModal_contentContainer__dmkZ_",divider:"AuthModal_divider__m1Cnz",bottomText:"AuthModal_bottomText__KHuHW",formSwitchLink:"AuthModal_formSwitchLink__vhpQY"}},13283:(e,t,r)=>{"use strict";r.d(t,{G6:()=>w,LE:()=>g,UI:()=>p,zm:()=>_,XW:()=>v,RZ:()=>h});var n=r(57383),o=r(82957),a=r(370);let s=async(e,t,r)=>await (0,a.w)("/sessions",{method:"POST",body:JSON.stringify({cart_token:r,login:e,recaptcha:{token:t.token,key:t.key,version:t.version},referral_code:null,sign_up_code:null}),cache:"no-store",useAuthCookies:!0}),i=async(e,t)=>await (0,a.w)("/one_time_password_authorizations",{method:"POST",body:JSON.stringify({code:e,one_time_password_id:t,include:"authentication_token",cookie:!0}),cache:"no-store",useAuthCookies:!0}),l=async(e,t)=>await (0,a.w)("/sessions",{method:"POST",body:JSON.stringify({cart_token:t,token:e,provider:"google"}),cache:"no-store",useAuthCookies:!0}),c=async(e,t,r)=>await (0,a.w)("/sessions",{method:"POST",body:JSON.stringify({cart_token:r,code:e,token:t,provider:"apple"}),cache:"no-store",useAuthCookies:!0}),u=async()=>await (0,a.w)("/sessions/current?cookie=true",{cache:"no-store",useAuthCookies:!0}),d=async()=>(0,a.w)("/sessions",{method:"DELETE",body:JSON.stringify({cookie:!0}),cache:"no-store",useAuthCookies:!0});var m=r(5497);async function p(){let e=n.A.get(o.eu.USER_ID),t=n.A.get(o.eu.SESSION_TOKEN);try{if(e&&t){let e=await u();return n.A.set(o.eu.CART_TOKEN,e.authentication_token.user.cart_token),e}return null}catch(e){return n.A.remove(o.eu.USER_ID),n.A.remove(o.eu.SESSION_TOKEN),null}}async function _(e){let{userEmailPhone:t,recaptcha:r}=e,a=n.A.get(o.eu.CART_TOKEN);return await s(t,r,a)}async function h(e){let{code:t,one_time_password_id:r}=e,a=await i(t,r),{one_time_password:{requestable_id:s,authentication_token:{token:l}}}=a;return n.A.set(o.eu.USER_ID,s),n.A.set(o.eu.SESSION_TOKEN,l),a}async function g(e){let t=n.A.get(o.eu.CART_TOKEN),r=await l(e,t),{authentication_token:{user:{id:a},token:s}={}}=r;return n.A.set(o.eu.USER_ID,a),n.A.set(o.eu.SESSION_TOKEN,s),r}async function w(e){let t=n.A.get(o.eu.CART_TOKEN),r=await c(e.code,e.idToken,t),{authentication_token:{user:{id:a},token:s}}=r;return n.A.set(o.eu.USER_ID,a),n.A.set(o.eu.SESSION_TOKEN,s),r}async function v(){try{await d()}catch(e){console.error("Error signing out:",e)}(0,m.nb)(),n.A.remove(o.eu.USER_ID),n.A.remove(o.eu.SESSION_TOKEN),n.A.remove(o.eu.CART_TOKEN)}},15109:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(25594),o=r(60376),a=r(37414),s=r(95155);r(12115);var i=r(36272),l=r(99789),c=r(65881);let u=e=>{var{isOpen:t,onClose:r=()=>{},children:u}=e,d=(0,a._)(e,["isOpen","onClose","children"]);let m=(0,i.A)();return t?m?(0,s.jsx)(l.A,(0,o._)((0,n._)({isOpen:t,onClose:r},d),{children:u})):(0,s.jsx)(c.A,(0,o._)((0,n._)({isOpen:t,onClose:r},d),{children:u})):null}},31246:e=>{e.exports={verificationCodeContainer:"CodeInput_verificationCodeContainer___Z9Ut",verificationCodeInput:"CodeInput_verificationCodeInput__3NAPg",codeError:"CodeInput_codeError__IZf1m"}},44116:(e,t,r)=>{"use strict";r.d(t,{A:()=>ew});var n,o,a,s=r(95155),i=r(12115),l=r(38637),c=r.n(l),u=r(89856),d=r(70284),m=r(47834);function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let _=e=>i.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 24 25"},e),n||(n=i.createElement("g",{clipPath:"url(#appleIcon_svg__a)"},i.createElement("path",{fill:"#fff",d:"M20.843 17.645a12 12 0 0 1-1.183 2.127q-.934 1.33-1.524 1.841-.912.839-1.958.862-.751.001-1.809-.432-1.057-.43-1.947-.43-.932 0-2.003.43-1.07.434-1.73.455-1.004.043-2.002-.885-.638-.555-1.594-1.907-1.025-1.441-1.685-3.347-.708-2.06-.708-3.99 0-2.212.957-3.811A5.6 5.6 0 0 1 5.66 6.53a5.4 5.4 0 0 1 2.708-.764q.797.001 2.096.487 1.296.488 1.662.489c.181 0 .798-.192 1.842-.576q1.481-.532 2.505-.444 2.778.223 4.166 2.193-2.483 1.506-2.457 4.21.023 2.107 1.525 3.5.679.645 1.523 1a16 16 0 0 1-.388 1.019M16.598.94q0 1.651-1.203 3.079c-.967 1.13-2.137 1.783-3.405 1.68a3 3 0 0 1-.026-.417c0-1.056.46-2.186 1.277-3.11q.612-.703 1.555-1.168.94-.46 1.779-.504.023.22.023.44"}))),o||(o=i.createElement("defs",null,i.createElement("clipPath",{id:"appleIcon_svg__a"},i.createElement("path",{fill:"#fff",d:"M0 .5h24v24H0z"})))));var h=r(82824),g=r.n(h);let w=e=>{let{onClick:t,text:r,className:n}=e;return(0,s.jsx)(d.A,{colorVariant:m.xX.black,size:m.F0.lg,onClick:t,className:"".concat(n," ").concat(g().svg),leftIcon:_,children:r})};w.propTypes={onClick:c().func,text:c().string,className:c().string};var v=r(55594),f=r(77732),y=r(25594),E=r(37414),A=r(29300),C=r.n(A),N=r(76014);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(null,arguments)}let x=e=>i.createElement("svg",b({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"none",viewBox:"0 0 16 15"},e),a||(a=i.createElement("path",{stroke:"#F04438",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.333,d:"M8 4.833V7.5m0 2.667h.006m6.66-2.667a6.667 6.667 0 1 1-13.333 0 6.667 6.667 0 0 1 13.333 0"})));var S=r(48914),I=r.n(S);let j=e=>{var t,{label:r,name:n,registerProps:o,errors:a,className:i}=e,l=(0,E._)(e,["label","name","registerProps","errors","className"]);let c=a&&a[n];return(0,s.jsxs)("div",{className:I().inputContainer,children:[r&&(0,s.jsx)("label",{htmlFor:n,children:r}),(0,s.jsxs)("div",{className:I().inputWrapper,children:[(0,s.jsx)(N.A,(0,y._)({type:"text",className:C()(I().input,i,{[I().inputError]:c}),id:n,name:n,registerProps:o},l)),c&&(0,s.jsx)(x,{className:I().errorSvg})]}),c&&(0,s.jsx)("p",{className:I().error,children:null==(t=a[n])?void 0:t.message})]})};j.propTypes={label:c().string,name:c().string.isRequired,registerProps:c().object.isRequired,errors:c().object,className:c().string};var k=r(62177),P=r(90221);let O=(e,t)=>{let{register:r,handleSubmit:n,setError:o,formState:{errors:a,isValid:s},clearErrors:i,watch:l,setValue:c,trigger:u,control:d}=(0,k.mN)({resolver:(0,P.u)(e)});return{register:r,handleSubmit:n(async e=>{try{await t(e)}catch(e){o("form",{type:"server",message:e.message||"An unexpected error occurred."})}}),errors:a,isValid:s,setError:o,clearErrors:i,watch:l,setValue:c,trigger:u,control:d}};var T=r(91942),F=r.n(T);let D=e=>{let{onSubmission:t,dictionary:r}=e,[n,o]=(0,i.useState)(!1),a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,l=/^\+?\d+$/,{register:c,handleSubmit:u,errors:d,isValid:m}=O(v.z.object({userEmailPhone:v.z.string().trim().min(1,{message:r.auth.emailError}).refine(e=>a.test(e)||l.test(e),"Invalid email or phone number")}),async e=>{try{o(!0),await t(e)}finally{o(!1)}});return(0,s.jsxs)("form",{onSubmit:u,className:F().formContainer,children:[(0,s.jsx)(j,{name:"userEmailPhone",label:r.auth.signin.label,registerProps:c("userEmailPhone"),errors:d}),d.form&&(0,s.jsx)("p",{className:F().error,children:d.form.message}),(0,s.jsx)(f.jn,{colorVariant:f.xX.blue,size:f.F0.lg,className:F().button,disabled:n||!m,type:"submit",children:r.auth.signin.btnText})]})};var R=r(84078),M=r.n(R);let L=e=>{let{onSubmission:t,dictionary:r}=e,[n,o]=(0,i.useState)(!1),a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,l=/^\+?\d+$/,{register:c,handleSubmit:u,errors:d,isValid:m}=O(v.z.object({userEmailPhone:v.z.string().trim().min(1,{message:r.auth.emailError}).refine(e=>a.test(e)||l.test(e),"Invalid email or phone number")}),async e=>{try{o(!0),await t(e)}finally{o(!1)}});return(0,s.jsxs)("form",{onSubmit:u,className:M().formContainer,children:[(0,s.jsx)(j,{name:"userEmailPhone",label:r.auth.signup.label,registerProps:c("userEmailPhone"),errors:d}),d.form&&(0,s.jsx)("p",{className:M().error,children:d.form.message}),(0,s.jsx)(f.jn,{colorVariant:f.xX.blue,size:f.F0.lg,className:M().button,disabled:n||!m,type:"submit",children:r.auth.signup.btnText})]})},U=["www.desertcart.co.uk","www.desertcart.co.il","www.desertcart.co.ke","www.desertcart.co.za","www.desertcart.co.th","www.desertcart.co.zw","www.desertcart.com.ar","www.desertcart.com.au","www.desertcart.com.br","www.desertcart.com.cy","www.desertcart.com.eg","www.desertcart.com.kw","www.desertcart.com.my","www.desertcart.com.pa","www.desertcart.com.py","www.desertcart.com.ua","www.desertcart.com.ve","www.desertcart.co.uk","www.desertcart.com.om","www.desertcart.ph","localhost"],z="recaptcha-v3-script",H=e=>U.includes(e)?2:1,V=e=>new Promise((t,r)=>{if(document.getElementById(z))return void t();let n=document.createElement("script");n.src="https://www.google.com/recaptcha/api.js?render=".concat(e),n.async=!0,n.defer=!0,n.id=z,n.onload=()=>{window.grecaptcha?window.grecaptcha.ready(()=>{t()}):r(Error("Failed to load reCAPTCHA"))},n.onerror=()=>r(Error("Failed to load reCAPTCHA script")),document.body.appendChild(n)}),G=(e,t)=>new Promise((r,n)=>{window.grecaptcha?window.grecaptcha.execute(e,{action:t}).then(e=>{r(e)}).catch(e=>{n(e)}):n(Error("reCAPTCHA not initialized"))}),q=(0,i.forwardRef)((e,t)=>{let{action:r,onTokenChange:n,interval:o=12e4}=e,a=H(window.location.hostname),s=2===a?"6LfQpAEqAAAAAA7zfG-kM70Na9FW7quCJemwTv-I":"6LejPfYpAAAAAHjl3BUcYMLSp4XHZdwu3AWwg89B",l=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=async()=>{try{let e=await G(s,r);n({token:e,key:a})}catch(e){console.error("Error executing reCAPTCHA:",e)}};return(async()=>{try{await V(s),e(),l.current=setInterval(e,o)}catch(e){console.error("Error loading reCAPTCHA script:",e)}})(),()=>{clearInterval(l.current);let e=document.querySelector(".grecaptcha-badge");e&&e.remove();let t=document.getElementById(z);t&&document.body.removeChild(t),window.grecaptcha&&delete window.grecaptcha}},[]),(0,i.useImperativeHandle)(t,()=>({refreshToken:async()=>{try{let e=await G(s,r);n({token:e,key:a})}catch(e){console.error("Error executing reCAPTCHA (manual refresh):",e)}}})),null});q.displayName="RecaptchaV3",q.propTypes={action:c().string.isRequired,onTokenChange:c().func.isRequired,interval:c().number};var B=r(13283),K=r(60376),Y=r(23293),X=r(31246),W=r.n(X);let J=/^\d*$/,$=e=>{let{control:t,setValue:r,errors:n,clearErrors:o,setError:a,trigger:l}=e,c=(0,k.FH)({control:t,name:"code"})||"";return(0,s.jsx)(Y.A,{value:c,onChange:e=>{r("code",e),J.test(e)?(o("code"),6===e.length&&l("code")):a("code",{type:"manual",message:"Invalid code. Numbers only."})},numInputs:6,isInputNum:!0,shouldAutoFocus:!0,containerStyle:W().verificationCodeContainer,hasErrored:!!n.code,skipDefaultStyles:!0,renderInput:(e,t)=>(0,i.createElement)("input",(0,K._)((0,y._)({},e),{key:t,className:"".concat(W().verificationCodeInput," ").concat(n.code?W().codeError:"")}))})};var Z=r(85724),Q=r.n(Z);let ee=e=>{let{onSubmission:t,resend:r,userEmailPhone:n,dictionary:o}=e,a=v.z.object({code:v.z.string().length(6,{message:o.auth.code.error}).regex(/^\d+$/,{message:o.auth.code.error})}),[l,c]=(0,i.useState)(!1),{handleSubmit:u,errors:d,isValid:m,setValue:p,trigger:_,clearErrors:h,setError:g,control:w}=O(a,async e=>{let{code:r}=e;try{c(!0),await t({verificationCode:r})}finally{c(!1)}});return(0,i.useEffect)(()=>{p("code","")},[p]),(0,s.jsxs)("form",{onSubmit:u,className:Q().formContainer,children:[(0,s.jsxs)("p",{className:Q().info,children:[o.auth.code.info," ",(0,s.jsx)("span",{children:n})]}),(0,s.jsx)($,{control:w,setValue:p,errors:d,clearErrors:h,setError:g,trigger:_}),d.code&&(0,s.jsx)("p",{className:Q().error,children:d.code.message}),d.form&&(0,s.jsx)("p",{className:Q().error,children:d.form.message}),(0,s.jsx)(f.jn,{colorVariant:f.xX.blue,size:f.F0.lg,className:Q().button,disabled:l||!m,type:"submit",children:o.auth.code.btnText}),(0,s.jsxs)("p",{className:Q().resend,children:[o.auth.code.resendPrompt," ",(0,s.jsx)("span",{onClick:()=>{r({userEmailPhone:n})},children:o.auth.code.resend})]})]})};var et=r(83982),er=r.n(et);let en=e=>{let{onSubmission:t,onClose:r,dictionary:n}=e,[o,a]=(0,i.useState)(!1),{register:l,handleSubmit:c,errors:u,isValid:d}=O(v.z.object({phone:v.z.string().trim().regex(/^\+?\d+$/,{message:n.auth.phoneError})}),async e=>{try{a(!0),await t(e)}finally{a(!1)}});return(0,s.jsxs)("form",{onSubmit:c,className:er().formContainer,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:n.auth.phone.info}),(0,s.jsx)(j,{name:"phone",label:n.auth.phone.label,registerProps:l("phone"),errors:u}),u.form&&(0,s.jsx)("p",{className:er().error,children:u.form.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.tA,{colorVariant:f.xX.gray,size:f.F0.lg,className:er().button,disabled:o||!d,type:"submit",children:n.auth.phone.addPhone}),(0,s.jsx)("span",{onClick:()=>{r()},children:n.auth.skip})]})]})};var eo=r(90554),ea=r.n(eo);let es=e=>{let{onSubmission:t,onClose:r,dictionary:n}=e,[o,a]=(0,i.useState)(!1),{register:l,handleSubmit:c,errors:u,isValid:d}=O(v.z.object({email:v.z.string().trim().email({message:n.auth.email.error})}),async e=>{try{a(!0),await t(e)}finally{a(!1)}});return(0,s.jsxs)("form",{onSubmit:c,className:ea().formContainer,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:n.auth.email.info}),(0,s.jsx)(j,{name:"email",label:n.auth.email.label,registerProps:l("email"),errors:u}),u.form&&(0,s.jsx)("p",{className:ea().error,children:u.form.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(f.tA,{colorVariant:f.xX.gray,size:f.F0.lg,className:ea().button,disabled:o||!d,type:"submit",children:n.auth.email.btnText}),(0,s.jsx)("span",{onClick:()=>{r()},children:n.auth.skip})]})]})};var ei=r(72075),el=r(34477);let ec=(0,el.createServerReference)("40043529ee9a1baee4ff3f6cd8c34314ae05e3b681",el.callServer,void 0,el.findSourceMapURL,"updateUserAction");var eu=r(10084),ed=r.n(eu),em=r(5497),ep=r(7524),e_=r(84857);let eh={SIGN_IN:"SIGN_IN",SIGN_UP:"SIGN_UP",VERIFY_CODE:"VERIFY_CODE",ADD_PHONE:"ADD_PHONE",ADD_EMAIL:"ADD_EMAIL"},eg=e=>{let{onClose:t,countryCode:r,dictionary:n,onLogin:o=()=>{}}=e,[a,l]=(0,i.useState)(eh.SIGN_IN),[c,d]=(0,i.useState)(null),[m,p]=(0,i.useState)(null),[_,h]=(0,i.useState)(null),{mutateUserSession:g}=(0,ei.A)(r),v=(0,i.useRef)(null),[f,y]=(0,i.useState)(""),E="893382041993-tdedividubjbaa7lsb58rindi15ntodn.apps.googleusercontent.com",A=(0,i.useCallback)(async e=>{let{credential:n}=e;try{let{authentication_token:{user:e}}=await (0,B.LE)(n,r),a={user_id:null==e?void 0:e.id,source:"google",login_status:"success"};(null==e?void 0:e.new_user)?(0,em.wJ)(a):(0,em.O$)(a),g(),o(),t()}catch(e){console.error("Error during Google sign-in:",e)}},[g,t]);(0,i.useEffect)(()=>{let e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>{window.google&&window.google.accounts&&window.google.accounts.id&&(window.google.accounts.id.initialize({client_id:E,callback:A,auto_select:!1,cancel_on_tap_outside:!0}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large",width:"400",locale:r}))},document.head.appendChild(e);let n=async e=>{if("https://apple-login.desertcart.com"!==e.origin)return;let n=new URLSearchParams(e.data),a=n.get("code"),s=n.get("id_token");if(n.get("state")!==f)return void console.error("Invalid state in Apple Sign-In response");if(a&&s)try{let{authentication_token:{user:e}}=await (0,B.G6)({code:a,idToken:s},r),n={user_id:null==e?void 0:e.id,source:"apple",login_status:"success"};(null==e?void 0:e.new_user)?(0,em.wJ)(n):(0,em.O$)(n),g(),o(),t()}catch(e){console.error("Error during Apple sign-in:",e)}};return window.addEventListener("message",n),()=>{document.head.removeChild(e),window.removeEventListener("message",n)}},[E,A,f,g,t]);let C=async e=>{h(e.userEmailPhone);try{var t;let n=await (0,B.zm)({userEmailPhone:e.userEmailPhone,recaptcha:{token:null==c?void 0:c.token,key:null==c?void 0:c.key,version:"V3"}},r);(null==n||null==(t=n.one_time_password)?void 0:t.id)||(ep.Z({category:"auth",data:{data:e,response:n}}),e_.Cp(Error("One-time password ID not found in response"))),p(n.one_time_password.id),l(eh.VERIFY_CODE)}finally{v.current&&v.current.refreshToken()}},N=async e=>{let{verificationCode:n}=e;try{var a;let e=await (0,B.RZ)({code:n,one_time_password_id:m},r);g(),o(),(0,em.O$)({user_id:null==e||null==(a=e.one_time_password)?void 0:a.requestable_id,source:"otp",login_status:"success"}),e.one_time_password.phone?e.one_time_password.email?t():l(eh.ADD_EMAIL):l(eh.ADD_PHONE)}catch(e){console.error("Error verifying code:",e)}},b=async e=>{try{await ec(e)}finally{t()}},x=(e=>{switch(e){case eh.SIGN_IN:return n.auth.signin.title;case eh.SIGN_UP:return n.auth.signup.title;case eh.VERIFY_CODE:return n.auth.code.verify;case eh.ADD_EMAIL:return n.auth.signup.addEmail;case eh.ADD_PHONE:return n.auth.signup.addPhone;default:return""}})(a),S=(e=>{switch(e){case eh.SIGN_IN:return(0,s.jsx)(D,{onSubmission:C,dictionary:n});case eh.SIGN_UP:return(0,s.jsx)(L,{onSubmission:C,dictionary:n});case eh.VERIFY_CODE:return(0,s.jsx)(ee,{userEmailPhone:_,onSubmission:N,resend:C,dictionary:n});case eh.ADD_PHONE:return(0,s.jsx)(en,{onSubmission:b,onClose:t,dictionary:n});case eh.ADD_EMAIL:return(0,s.jsx)(es,{onSubmission:b,onClose:t,dictionary:n});default:return null}})(a);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:ed().topContainer,children:[(0,s.jsxs)("div",{className:ed().headingContainer,children:[(0,s.jsx)("h4",{children:x}),(0,s.jsx)(u.A,{onClick:t})]}),(0,s.jsx)("div",{className:ed().contentContainer,children:S})]}),a!==eh.ADD_PHONE&&a!==eh.ADD_EMAIL&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:ed().divider}),(0,s.jsxs)("div",{className:ed().bottomContainer,children:[(0,s.jsx)("div",{id:"google-signin-button",className:ed().googleButton}),(0,s.jsx)(w,{onClick:()=>{let e=encodeURIComponent("https://apple-login.desertcart.com/appleSignIn"),t=Math.random().toString(36).substring(2,15);y(t);let r="https://appleid.apple.com/auth/authorize?"+"client_id=".concat("com.desertcart.applesignin","&")+"redirect_uri=".concat(e,"&")+"response_type=".concat("code id_token","&")+"scope=".concat("name email","&")+"state=".concat(t,"&")+"response_mode=form_post";window.open(r,"AppleSignIn","width=500,height=600")},text:n.auth.signin.appleText,className:ed().socialButton}),(a===eh.SIGN_IN||a===eh.SIGN_UP)&&(0,s.jsxs)("p",{className:ed().bottomText,children:[a===eh.SIGN_IN?n.auth.signin.newToDc:n.auth.signup.existingAccount," ",(0,s.jsx)("span",{className:ed().formSwitchLink,onClick:()=>{l(e=>e===eh.SIGN_IN?eh.SIGN_UP:eh.SIGN_IN)},children:a===eh.SIGN_UP?n.auth.signin.title:n.auth.signin.createNewAccount})]})]})]}),(0,s.jsx)(q,{ref:v,action:"request_otp_login",onTokenChange:e=>{d(e)}})]})};eg.propTypes={onClose:c().func.isRequired};let ew=eg},48826:e=>{e.exports={input:"Input_input__kFeKH"}},48914:e=>{e.exports={inputContainer:"FormInput_inputContainer__jO0KV",inputWrapper:"FormInput_inputWrapper__BKKq2",input:"FormInput_input__n2xIO",errorSvg:"FormInput_errorSvg__dZn09",inputError:"FormInput_inputError__hpLhX",error:"FormInput_error__rWoan"}},65881:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(95155),o=r(12115),a=r(83221),s=r.n(a),i=r(29300),l=r.n(i);let c=e=>{let{isOpen:t,onClose:r,children:a,showOverlay:i=!0,blockScroll:c=!0,closeOnOutsideClick:u=!0,className:d}=e,m=(0,o.useRef)(null),p=e=>{for(;e&&e!==document.body;){let t=e.scrollHeight>e.clientHeight,r=window.getComputedStyle(e).overflowY;if(("auto"===r||"scroll"===r)&&e.scrollHeight>e.clientHeight&&t)return e;e=e.parentElement}return null},_=e=>{var t;let r=p(e.target);if(!(null==(t=m.current)?void 0:t.contains(r)))return void e.preventDefault();let n=0===r.scrollTop,o=r.clientHeight,a=r.scrollHeight-r.scrollTop===o;(n&&e.deltaY<0||a&&e.deltaY>0)&&e.preventDefault()},h=e=>{["ArrowUp","ArrowDown","PageUp","PageDown","Home","End"].includes(e.key)&&_(e)};return((0,o.useEffect)(()=>(t&&c&&(document.addEventListener("wheel",_,{passive:!1}),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("keydown",h,{passive:!1})),()=>{document.removeEventListener("wheel",_,{passive:!1}),document.removeEventListener("touchmove",_,{passive:!1}),document.removeEventListener("keydown",h,{passive:!1})}),[t,c]),(0,o.useEffect)(()=>{if(t&&u){let e=e=>{m.current&&!m.current.contains(e.target)&&r(e)};return document.addEventListener("mousedown",e,{passive:!1}),document.addEventListener("touchstart",e,{passive:!1}),()=>{document.removeEventListener("mousedown",e,{passive:!1}),document.removeEventListener("touchstart",e,{passive:!1})}}},[t,u,r]),t)?(0,n.jsxs)(n.Fragment,{children:[i&&(0,n.jsx)("div",{className:s().backdrop}),(0,n.jsx)("div",{className:l()(s().overlay,d),ref:m,children:a})]}):null}},72075:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(25594),o=r(60376),a=r(12115),s=r(19169),i=r(13283),l=r(5497),c=r(18379),u=r(33779);function d(e){let{data:t,error:r,isLoading:d,mutate:m}=(0,s.Ay)(e?"userSession-".concat(e):null,()=>(0,i.UI)(e),{shouldRetryOnError:!1,revalidateOnFocus:!1});return(0,a.useEffect)(()=>{if(t){let{user:{first_name:e,last_name:r,email:a,phone_number:s,id:i,new_user:d},user:m}=t.authentication_token;m.new_user&&(0,l.wJ)({user_id:i,source:u.FL.EMAIL,login_status:"success"}),(0,l.lM)({email:a,firstName:e,lastName:r,phoneNumber:null==s?void 0:s.replace(/\D+/g,""),user_id:i,new_user:d}),(0,l.ah)((0,o._)((0,n._)({},m),{property_type:c.Bz.UPDATE_USER_PROPERTIES}))}},[]),{isLoading:d,session:t,error:r,mutateUserSession:()=>{m()}}}},76014:(e,t,r)=>{"use strict";r.d(t,{A:()=>p});var n=r(25594),o=r(37414),a=r(95155);r(12115);var s=r(38637),i=r.n(s),l=r(48826),c=r.n(l),u=r(29300),d=r.n(u);let m=e=>{var{value:t,onChange:r,placeholder:s="",disabled:i=!1,onFocus:l,onBlur:u,onKeyDown:m,className:p,name:_,registerProps:h}=e,g=(0,o._)(e,["value","onChange","placeholder","disabled","onFocus","onBlur","onKeyDown","className","name","registerProps"]);return(0,a.jsx)("input",(0,n._)({className:d()(c().input,p),type:"text",value:t,onChange:r,placeholder:s,onFocus:l,onBlur:u,onKeyDown:m,disabled:i,name:_},h,g))};m.propTypes={value:i().string.isRequired,onChange:i().func.isRequired,placeholder:i().string,onFocus:i().func,onBlur:i().func,className:i().string};let p=m},82824:e=>{e.exports={svg:"AppleSignInButton_svg__P6HOX"}},83221:e=>{e.exports={backdrop:"Overlay_backdrop__MSmjX",overlay:"Overlay_overlay__5Qli1"}},83982:e=>{e.exports={formContainer:"AddPhoneModalForm_formContainer__jq_oV",button:"AddPhoneModalForm_button__izqiY",error:"AddPhoneModalForm_error__fXxN8"}},84078:e=>{e.exports={formContainer:"SignUpModalForm_formContainer__HhLdW",button:"SignUpModalForm_button__Qvc4G",error:"SignUpModalForm_error__6lveC"}},85724:e=>{e.exports={formContainer:"VerifyCodeForm_formContainer__W_u5D",info:"VerifyCodeForm_info__t6Dn1",button:"VerifyCodeForm_button__uYZOO",resend:"VerifyCodeForm_resend__CeuI6",error:"VerifyCodeForm_error___qKFU"}},90554:e=>{e.exports={formContainer:"AddEmailModalForm_formContainer__E7uI4",button:"AddEmailModalForm_button__SAkCV",error:"AddEmailModalForm_error__AoDh3"}},91942:e=>{e.exports={formContainer:"SignInModalForm_formContainer__aJuPC",button:"SignInModalForm_button__TeAXA",error:"SignInModalForm_error__Q18NN"}}}]);